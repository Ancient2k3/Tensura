-- If Game Is Successfully Loaded Then --
game:IsLoaded()

-- Removed Pre-existing GUI --
local Previous_SG_Name = "NganHa2k3_BFV01"

for _, SG in ipairs(game:GetService("CoreGui"):GetChildren()) do
    if SG:IsA("ScreenGui") and SG.Name == Previous_SG_Name then
        pcall(function()
            SG:Destroy()
        end)
    end
end

-- New Blox Fruit Script make by NganHa2k3 --
local BloxFruits_SGUI_Version_01 = Instance.new("ScreenGui")
local CG = game:GetService("CoreGui")
local StarterGui = game:GetService("StarterGui")
BloxFruits_SGUI_Version_01.Name = "NganHa2k3_BFV01"
BloxFruits_SGUI_Version_01.Parent = CG

-- Local Variable[Color]
local White, Black, Red, Green, DarkBlue, SkyBlue, Purple, Yellow
White = Color3.fromRGB(255, 255, 255)
Black = Color3.fromRGB(0, 0, 0)
Red = Color3.fromRGB(255, 0, 0)
Green = Color3.fromRGB(0, 255, 0)
DarkBlue = Color3.fromRGB(0, 0, 255)
SkyBlue = Color3.fromRGB(0, 255, 255)
Purple = Color3.fromRGB(255, 0, 255)
Yellow = Color3.fromRGB(255, 255, 0)

local A_Font, Ult_Size, HBBox_Size, HBBox_Pos, HBBox_CanvasSize
A_Font = Enum.Font.Code
Ult_Size = UDim2.new(0.96, 0, 0.075, 0)
HBBox_Size = UDim2.new(0.88, 0, 0.9, 0)
HBBox_Pos = UDim2.new(0.02, 0, 0.02, 0)
HBBox_CanvasSize = UDim2.new(0, 0, 2, 0)

-- Local Variable[for Configs SF]
local HUDSize_Transform, HUDPosition_Transform, DFrame_Small, DFrame_Big, DFrame_Default
HUDPosition_Transform = UDim2.new(0.02, 0, 0.02, 0)
HUDSize_Transform = UDim2.new(0.96, 0, 0.15, 0)

DFrame_Default = UDim2.new(0.2, 0, 0.55, 0)
DFrame_Small = UDim2.new(0.1, 0, 0.275, 0)
DFrame_Big = UDim2.new(0.6, 0, 0.65, 0)

-- Local Variable[GUI]
local TOGGLER_GUI, DRAGGING_FRAME, SCROLLINGFRAME_ULT, CONFIGS_SCROLLINGFRAME, Configs_MainScript, FARM_SCROLLINGFRAME, Farm_MainScript, TELEPORT_SCROLLINGFRAME, Tp_MainScript, PLAYER_SCROLLINGFRAME, PVP_MainScript, SHOP_SCRLF, Shop_MainScript

-- InsideConfigs [Button]
local HUD_SIZETRANSFORMATION, ON_USE_MINIBUTTON

-- InsideAutoFarm [Button]
local CONFIGS_FARM, TPSPEED_MISC, SWITCHINGMODE_MISC, SWITCHINGDIRECTION_MISC, STARTNEAREST_FARM, STARTNEAREST_FARM_MiniButton

-- InsideShop/Stock [Button]
local REROLLING_FRUITS, BOUGHTSWORD, BOUGHTGUN, DARKSTEP, ELECTRO, FISHKARATE, DRAGONBREATH, SUPERHUMAN, DEATHSTEP, ELECTRICCLAWS, SHARKKARATE, DRAGONTALON, GODHUMAN, SAGUINEART, DIVINEART, ALLHAKI

-- Directional AutoFarm[Dir Variable]
local DirOnTop, DirOnSide, DirBelowGround, CurrentlyDir
DirOnTop = Vector3.new(0, 60, 0)
DirOnSide = Vector3.new(30, 0, 30)
DirBelowGround = Vector3.new(0, -30, 0)

CurrentlyDir = DirOnTop

-- Instance[Create Button]
TOGGLER_GUI = Instance.new("TextButton")
DRAGGING_FRAME = Instance.new("Frame")
SCROLLINGFRAME_ULT = Instance.new("ScrollingFrame")
CONFIGS_SCROLLINGFRAME = Instance.new("ScrollingFrame")
Configs_MainScript = Instance.new("TextButton")
FARM_SCROLLINGFRAME = Instance.new("ScrollingFrame")
Farm_MainScript = Instance.new("TextButton")
TELEPORT_SCROLLINGFRAME = Instance.new("ScrollingFrame")
Tp_MainScript = Instance.new("TextButton")
PLAYER_SCROLLINGFRAME = Instance.new("ScrollingFrame")
PVP_MainScript = Instance.new("TextButton")
SHOP_SCRLF = Instance.new("ScrollingFrame")
Shop_MainScript = Instance.new("TextButton")


-- Instance[Create Button:Parent:Configs]
HUD_SIZETRANSFORMATION = Instance.new("TextButton")
ON_USE_MINIBUTTON = Instance.new("TextButton")

-- Instance[Create Button:Parent:AutoFarm]
CONFIGS_FARM = Instance.new("TextButton")
TPSPEED_MISC = Instance.new("TextBox")
SWITCHINGMODE_MISC = Instance.new("TextButton")
STARTNEAREST_FARM = Instance.new("TextButton")
STARTNEAREST_FARM_MiniButton = Instance.new("TextButton")
SWITCHINGDIRECTION_MISC = Instance.new("TextButton")

-- Instance[Create Button:Parent:Shop/Stock]
REROLLING_FRUITS = Instance.new("TextButton")
BOUGHTSWORD = Instance.new("TextBox")
BOUGHTGUN = Instance.new("TextBox")
ALLHAKI = Instance.new("TextButton")

-- Local Variable[Players]
local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- Local Variable[Modules]
local TS_MainScript = game:GetService("TweenService")
local rs = game:GetService("RunService")
local VU = game:GetService("VirtualUser")
local Camera = game:GetService("Workspace").CurrentCamera

-- Variable[Modules_1]
local TweenSpeed_X01, Is_CurrentlyOn, Is_CurrentTween, CameraHumanoid
TweenSpeed_X01 = 150
Is_CurrentlyOn = false
Is_CurrentTween = nil
CameraHumanoid = nil

-- VariableUI[modules_x]
local InUse_MiniButton
InUse_MiniButton = false

-- Variable PlayerStatus[modules_exp]
local CurrentLevel
CurrentLevel = player:FindFirstChild("Data") and player.Data:FindFirstChild("Level") and player.Data.Level.Value or "N/A"

-- Function[MainScript]
-- GetParts function --
function GetParts(partName)
    for _, obj in pairs(game.Workspace:GetDescendants()) do
        if obj:IsA("BasePart") and obj.Name == partName then
            return obj
        end
    end
    return nil
end

-- Notify function --
function Ntf(title_msg, text_msg, duration_msg)
    StarterGui:SetCore("SendNotification", {
        Title = title_msg,
        Text = text_msg,
        Duration = duration_msg,
    })
end

-- Calculate Tweening Duration --
function Calculate_TweeningDuration(Start_Position, End_Position, Speed_X01)
    local distance = (End_Position - Start_Position).magnitude
    return distance / Speed_X01
end

-- Tweening Information --
function Create_TweeningInformation(Start_Position, End_Position)
    local duration = Calculate_TweeningDuration(Start_Position, End_Position, TweenSpeed_X01)
    return TweenInfo.new(duration, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut)
end


-- Instance[Modifier Button]
-- Open/Closed GUI --
TOGGLER_GUI.Parent = BloxFruits_SGUI_Version_01
TOGGLER_GUI.BackgroundColor3 = Black
TOGGLER_GUI.BackgroundTransparency = 0.5
TOGGLER_GUI.Position = UDim2.new(0.84, 0, -0.1, 0)
TOGGLER_GUI.Size = UDim2.new(0.05, 0, 0.1, 0)
TOGGLER_GUI.TextScaled = true
TOGGLER_GUI.TextColor3 = White
TOGGLER_GUI.Font = A_Font
TOGGLER_GUI.Text = "â—‡Zero"
TOGGLER_GUI.Visible = true

-- Speed Teleportation Configs_1 --
TPSPEED_MISC.Parent = BloxFruits_SGUI_Version_01
TPSPEED_MISC.BackgroundColor3 = Black
TPSPEED_MISC.BackgroundTransparency = 0.5
TPSPEED_MISC.Position = UDim2.new(0.78, 0, -0.1, 0)
TPSPEED_MISC.Size = UDim2.new(0.05, 0, 0.1, 0)
TPSPEED_MISC.TextScaled = true
TPSPEED_MISC.TextColor3 = White
TPSPEED_MISC.Font = A_Font
TPSPEED_MISC.Text = ""
TPSPEED_MISC.ClearTextOnFocus = false
TPSPEED_MISC.Visible = false

-- Switching current mode Teleportation or Tween Position Configs_2 --
SWITCHINGMODE_MISC.Parent = BloxFruits_SGUI_Version_01
SWITCHINGMODE_MISC.BackgroundColor3 = Black
SWITCHINGMODE_MISC.BackgroundTransparency = 0.5
SWITCHINGMODE_MISC.Position = UDim2.new(0.72, 0, -0.1, 0)
SWITCHINGMODE_MISC.Size = UDim2.new(0.05, 0, 0.1, 0)
SWITCHINGMODE_MISC.TextScaled = true
SWITCHINGMODE_MISC.TextColor3 = Yellow
SWITCHINGMODE_MISC.Font = A_Font
SWITCHINGMODE_MISC.Text = "Teleportation"
SWITCHINGMODE_MISC.Visible = false

-- Switching Directional of AutoFarm --
SWITCHINGDIRECTION_MISC.Parent = BloxFruits_SGUI_Version_01
SWITCHINGDIRECTION_MISC.BackgroundColor3 = Black
SWITCHINGDIRECTION_MISC.BackgroundTransparency = 0.5
SWITCHINGDIRECTION_MISC.Position = UDim2.new(0.66, 0, -0.1, 0)
SWITCHINGDIRECTION_MISC.Size = UDim2.new(0.05, 0, 0.1, 0)
SWITCHINGDIRECTION_MISC.TextScaled = true
SWITCHINGDIRECTION_MISC.TextColor3 = SkyBlue
SWITCHINGDIRECTION_MISC.Font = A_Font
SWITCHINGDIRECTION_MISC.Text = "Dir: On Top"
SWITCHINGDIRECTION_MISC.Visible = false

-- Draggable Frame --
DRAGGING_FRAME.Parent = BloxFruits_SGUI_Version_01
DRAGGING_FRAME.BackgroundColor3 = Black
DRAGGING_FRAME.BackgroundTransparency = 0.5
DRAGGING_FRAME.Position = UDim2.new(0.8, 0, 0.05, 0)
DRAGGING_FRAME.Size = DFrame_Default
DRAGGING_FRAME.Active = true
DRAGGING_FRAME.Draggable = true
DRAGGING_FRAME.Visible = false

-- Scrolling frame hold button --
SCROLLINGFRAME_ULT.Parent = DRAGGING_FRAME
SCROLLINGFRAME_ULT.BackgroundColor3 = Black
SCROLLINGFRAME_ULT.BackgroundTransparency = 0.5
SCROLLINGFRAME_ULT.Position = UDim2.new(-0.415, 0, 0, 0)
SCROLLINGFRAME_ULT.Size = UDim2.new(0.4, 0, 1, 0)
SCROLLINGFRAME_ULT.CanvasSize = UDim2.new(0, 0, 2, 0)
SCROLLINGFRAME_ULT.ScrollBarThickness = 0.1
SCROLLINGFRAME_ULT.Visible = false

-- Scrolling frame of Configs button --
CONFIGS_SCROLLINGFRAME.Parent = DRAGGING_FRAME
CONFIGS_SCROLLINGFRAME.BackgroundColor3 = Black
CONFIGS_SCROLLINGFRAME.BackgroundTransparency = 0.5
CONFIGS_SCROLLINGFRAME.Position = HBBox_Pos
CONFIGS_SCROLLINGFRAME.Size = HBBox_Size
CONFIGS_SCROLLINGFRAME.CanvasSize = HBBox_CanvasSize
CONFIGS_SCROLLINGFRAME.ScrollBarThickness = 0.1
CONFIGS_SCROLLINGFRAME.Visible = false

-- Scrolling frame of Farm button --
FARM_SCROLLINGFRAME.Parent = DRAGGING_FRAME
FARM_SCROLLINGFRAME.BackgroundColor3 = Black
FARM_SCROLLINGFRAME.BackgroundTransparency = 0.5
FARM_SCROLLINGFRAME.Position = HBBox_Pos
FARM_SCROLLINGFRAME.Size = HBBox_Size
FARM_SCROLLINGFRAME.CanvasSize = HBBox_CanvasSize
FARM_SCROLLINGFRAME.ScrollBarThickness = 0.1
FARM_SCROLLINGFRAME.Visible = false

-- Scrolling frame of Teleportation button --
TELEPORT_SCROLLINGFRAME.Parent = DRAGGING_FRAME
TELEPORT_SCROLLINGFRAME.BackgroundColor3 = Black
TELEPORT_SCROLLINGFRAME.BackgroundTransparency = 0.5
TELEPORT_SCROLLINGFRAME.Position = HBBox_Pos
TELEPORT_SCROLLINGFRAME.Size = HBBox_Size
TELEPORT_SCROLLINGFRAME.CanvasSize = HBBox_CanvasSize
TELEPORT_SCROLLINGFRAME.ScrollBarThickness = 0.1
TELEPORT_SCROLLINGFRAME.Visible = false

-- Scrolling frame of PVP button --
PLAYER_SCROLLINGFRAME.Parent = DRAGGING_FRAME
PLAYER_SCROLLINGFRAME.BackgroundColor3 = Black
PLAYER_SCROLLINGFRAME.BackgroundTransparency = 0.5
PLAYER_SCROLLINGFRAME.Position = HBBox_Pos
PLAYER_SCROLLINGFRAME.Size = HBBox_Size
PLAYER_SCROLLINGFRAME.CanvasSize = HBBox_CanvasSize
PLAYER_SCROLLINGFRAME.ScrollBarThickness = 0.1
PLAYER_SCROLLINGFRAME.Visible = false

-- Scrolling frame of Shop button --
SHOP_SCRLF.Parent = DRAGGING_FRAME
SHOP_SCRLF.BackgroundColor3 = Black
SHOP_SCRLF.BackgroundTransparency = 0.5
SHOP_SCRLF.Position = HBBox_Pos
SHOP_SCRLF.Size = HBBox_Size
SHOP_SCRLF.CanvasSize = HBBox_CanvasSize
SHOP_SCRLF.ScrollBarThickness = 0.1
SHOP_SCRLF.Visible = false

-- Configs Button for MainScript --
Configs_MainScript.Parent = SCROLLINGFRAME_ULT
Configs_MainScript.BackgroundColor3 = Black
Configs_MainScript.BackgroundTransparency = 0
Configs_MainScript.Position = UDim2.new(0.02, 0, 0.02, 0)
Configs_MainScript.Size = Ult_Size
Configs_MainScript.TextScaled = true
Configs_MainScript.TextColor3 = White
Configs_MainScript.Font = A_Font
Configs_MainScript.Text = "Configs"
Configs_MainScript.Visible = true

-- Farm Button for MainScript --
Farm_MainScript.Parent = SCROLLINGFRAME_ULT
Farm_MainScript.BackgroundColor3 = Black
Farm_MainScript.BackgroundTransparency = 0
Farm_MainScript.Position = UDim2.new(0.02, 0, 0.097, 0)
Farm_MainScript.Size = Ult_Size
Farm_MainScript.TextScaled = true
Farm_MainScript.TextColor3 = White
Farm_MainScript.Font = A_Font
Farm_MainScript.Text = "Auto Farm"
Farm_MainScript.Visible = true

-- Teleportation button for MainScript --
Tp_MainScript.Parent = SCROLLINGFRAME_ULT
Tp_MainScript.BackgroundColor3 = Black
Tp_MainScript.BackgroundTransparency = 0
Tp_MainScript.Position = UDim2.new(0.02, 0, 0.174, 0)
Tp_MainScript.Size = Ult_Size
Tp_MainScript.TextScaled = true
Tp_MainScript.TextColor3 = White
Tp_MainScript.Font = A_Font
Tp_MainScript.Text = "TP Islands/Secrect"
Tp_MainScript.Visible = true

-- PVP button for MainScript --
PVP_MainScript.Parent = SCROLLINGFRAME_ULT
PVP_MainScript.BackgroundColor3 = Black
PVP_MainScript.BackgroundTransparency = 0
PVP_MainScript.Position = UDim2.new(0.02, 0, 0.251, 0)
PVP_MainScript.Size = Ult_Size
PVP_MainScript.TextScaled = true
PVP_MainScript.TextColor3 = White
PVP_MainScript.Font = A_Font
PVP_MainScript.Text = "PVP"
PVP_MainScript.Visible = true

-- Shop/Stock button for MainScript --
Shop_MainScript.Parent = SCROLLINGFRAME_ULT
Shop_MainScript.BackgroundColor3 = Black
Shop_MainScript.BackgroundTransparency = 0
Shop_MainScript.Position = UDim2.new(0.02, 0, 0.328, 0)
Shop_MainScript.Size = Ult_Size
Shop_MainScript.TextScaled = true
Shop_MainScript.TextColor3 = White
Shop_MainScript.Font = A_Font
Shop_MainScript.Text = "Shop/Stock"
Shop_MainScript.Visible = true

-- Button[Inside Configs[Slot:1]]
HUD_SIZETRANSFORMATION.Parent = CONFIGS_SCROLLINGFRAME
HUD_SIZETRANSFORMATION.BackgroundColor3 = Black
HUD_SIZETRANSFORMATION.BackgroundTransparency = 0
HUD_SIZETRANSFORMATION.Position = HUDPosition_Transform
HUD_SIZETRANSFORMATION.Size = HUDSize_Transform
HUD_SIZETRANSFORMATION.TextScaled = true
HUD_SIZETRANSFORMATION.TextColor3 = White
HUD_SIZETRANSFORMATION.Font = A_Font
HUD_SIZETRANSFORMATION.Text = "Size: Default"
HUD_SIZETRANSFORMATION.Visible = true

-- Configs[Slot:2]
ON_USE_MINIBUTTON.Parent = CONFIGS_SCROLLINGFRAME
ON_USE_MINIBUTTON.BackgroundColor3 = Black
ON_USE_MINIBUTTON.BackgroundTransparency = 0
ON_USE_MINIBUTTON.Position = UDim2.new(0.02, 0, 0.185, 0)
ON_USE_MINIBUTTON.Size = UDim2.new(0.96, 0, 0.15, 0)
ON_USE_MINIBUTTON.TextScaled = true
ON_USE_MINIBUTTON.TextColor3 = White
ON_USE_MINIBUTTON.Font = A_Font
ON_USE_MINIBUTTON.Text = "USE MINI BUTTON: NO"
ON_USE_MINIBUTTON.Visible = true

-- Button[Inside AutoFarm[Slot:1]]
CONFIGS_FARM.Parent = FARM_SCROLLINGFRAME
CONFIGS_FARM.BackgroundColor3 = Black
CONFIGS_FARM.BackgroundTransparency = 0
CONFIGS_FARM.Position = HUDPosition_Transform
CONFIGS_FARM.Size = HUDSize_Transform
CONFIGS_FARM.TextScaled = true
CONFIGS_FARM.TextColor3 = White
CONFIGS_FARM.Font = A_Font
CONFIGS_FARM.Text = "Mini Button Configs Script"
CONFIGS_FARM.Visible = true

-- AutoFarm[Slot:2]
STARTNEAREST_FARM.Parent = FARM_SCROLLINGFRAME
STARTNEAREST_FARM.BackgroundColor3 = Black
STARTNEAREST_FARM.BackgroundTransparency = 0
STARTNEAREST_FARM.Position = UDim2.new(0.02, 0, 0.185, 0)
STARTNEAREST_FARM.Size = UDim2.new(0.96, 0, 0.15, 0)
STARTNEAREST_FARM.TextScaled = true
STARTNEAREST_FARM.TextColor3 = White
STARTNEAREST_FARM.Font = A_Font
STARTNEAREST_FARM.Text = "Auto Farm Nearest: OFF"
STARTNEAREST_FARM.Visible = true

-- MiniButton [1]
STARTNEAREST_FARM_MiniButton.Parent = BloxFruits_SGUI_Version_01
STARTNEAREST_FARM_MiniButton.BackgroundColor3 = Black
STARTNEAREST_FARM_MiniButton.BackgroundTransparency = 0.5
STARTNEAREST_FARM_MiniButton.Position = UDim2.new(0.4, 0, 0.68, 0)
STARTNEAREST_FARM_MiniButton.Size = UDim2.new(0.05, 0, 0.1, 0)
STARTNEAREST_FARM_MiniButton.TextScaled = true
STARTNEAREST_FARM_MiniButton.TextColor3 = White
STARTNEAREST_FARM_MiniButton.Font = A_Font
STARTNEAREST_FARM_MiniButton.Text = "Nearest Farm: OFF"
STARTNEAREST_FARM_MiniButton.Visible = false

-- Button[Inside Shop/Stock[Slot:1]]
REROLLING_FRUITS.Parent = SHOP_SCRLF
REROLLING_FRUITS.BackgroundColor3 = Black
REROLLING_FRUITS.BackgroundTransparency = 0
REROLLING_FRUITS.Position = HUDPosition_Transform
REROLLING_FRUITS.Size = HUDSize_Transform
REROLLING_FRUITS.TextScaled = true
REROLLING_FRUITS.TextColor3 = White
REROLLING_FRUITS.Font = A_Font
REROLLING_FRUITS.Text = "Random a Fruit"
REROLLING_FRUITS.Visible = true

-- Shop/Stock[Slot:2]
BOUGHTSWORD.Parent = SHOP_SCRLF
BOUGHTSWORD.BackgroundColor3 = Black
BOUGHTSWORD.BackgroundTransparency = 0
BOUGHTSWORD.Position = UDim2.new(0.02, 0, 0.185, 0)
BOUGHTSWORD.Size = UDim2.new(0.96, 0, 0.15, 0)
BOUGHTSWORD.TextScaled = true
BOUGHTSWORD.TextColor3 = White
BOUGHTSWORD.Font = A_Font
BOUGHTSWORD.Text = ""
BOUGHTSWORD.ClearTextOnFocus = false
BOUGHTSWORD.PlaceholderText = "type in /fruit? to reveal all name"
BOUGHTSWORD.Visible = true

-- Shop/Stock[Slot:3]
BOUGHTGUN.Parent = SHOP_SCRLF
BOUGHTGUN.BackgroundColor3 = Black
BOUGHTGUN.BackgroundTransparency = 0
BOUGHTGUN.Position = UDim2.new(0.02, 0, 0.350, 0)
BOUGHTGUN.Size = UDim2.new(0.96, 0, 0.15, 0)
BOUGHTGUN.TextScaled = true
BOUGHTGUN.TextColor3 = White
BOUGHTGUN.Font = A_Font
BOUGHTGUN.Text = ""
BOUGHTGUN.ClearTextOnFocus = false
BOUGHTGUN.PlaceholderText = "type in /item? to reveal all name"
BOUGHTGUN.Visible = true

-- Shop/Stock[Slot:4]
ALLHAKI.Parent = SHOP_SCRLF
ALLHAKI.BackgroundColor3 = Black
ALLHAKI.BackgroundTransparency = 0
ALLHAKI.Position = UDim2.new(0.02, 0, 0.515, 0)
ALLHAKI.Size = UDim2.new(0.96, 0, 0.15, 0)
ALLHAKI.TextScaled = true
ALLHAKI.TextColor3 = White
ALLHAKI.Font = A_Font
ALLHAKI.Text = "Learn All Haki"
ALLHAKI.Visible = true

-- Local Variable[UICorner]
local TOGGLER_GUI_UI, DRAGGING_FRAME_UI, SCROLLINGFRAME_ULT_UI, Configs_MainScript_UI, Farm_MainScript_UI, Tp_MainScript_UI, PVP_MainScript_UI, Shop_MainScript_UI, MiniButton_1
local UI_CornerRadius
UI_CornerRadius = UDim.new(0.15, 0)

TOGGLER_GUI_UI = Instance.new("UICorner")
DRAGGING_FRAME_UI = Instance.new("UICorner")
SCROLLINGFRAME_ULT_UI = Instance.new("UICorner")
Configs_MainScript_UI = Instance.new("UICorner")
Farm_MainScript_UI = Instance.new("UICorner")
Tp_MainScript_UI = Instance.new("UICorner")
PVP_MainScript_UI = Instance.new("UICorner")
Shop_MainScript_UI = Instance.new("UICorner")
MiniButton_1 = Instance.new("UICorner")


TOGGLER_GUI_UI.Parent = TOGGLER_GUI
DRAGGING_FRAME_UI.Parent = DRAGGING_FRAME
SCROLLINGFRAME_ULT_UI.Parent = SCROLLINGFRAME_ULT
Configs_MainScript_UI.Parent = Configs_MainScript
Farm_MainScript_UI.Parent = Farm_MainScript
Tp_MainScript_UI.Parent = Tp_MainScript
PVP_MainScript_UI.Parent = PVP_MainScript
Shop_MainScript_UI.Parent = Shop_MainScript
MiniButton_1.Parent = STARTNEAREST_FARM_MiniButton


TOGGLER_GUI_UI.CornerRadius = UDim.new(0.2, 0)
DRAGGING_FRAME_UI.CornerRadius = UDim.new(0.02, 0)
SCROLLINGFRAME_ULT_UI.CornerRadius = UDim.new(0.2, 0)
Configs_MainScript_UI.CornerRadius = UI_CornerRadius
Farm_MainScript_UI.CornerRadius = UI_CornerRadius
Tp_MainScript_UI.CornerRadius = UI_CornerRadius
PVP_MainScript_UI.CornerRadius = UI_CornerRadius
Shop_MainScript_UI.CornerRadius = UI_CornerRadius
MiniButton_1.CornerRadius = UDim.new(0.1, 0)

-- Auto Farm Nearest[Func]
function find_nearest_npc()
    local nearest_npc = nil
    local nearest_dis = math.huge
    local detect_dis = 1000
    
    for _, npc in pairs(game.Workspace.Enemies:GetChildren()) do
        if npc:IsA("Model") and npc:FindFirstChild("HumanoidRootPart") then
            local distance = (player.Character.HumanoidRootPart.Position - npc.HumanoidRootPart.Position).magnitude
            
            if distance < nearest_dis and distance <= detect_dis then
                nearest_dis = distance
                nearest_npc = npc
            end
        end
    end
    
    if nearest_npc and nearest_npc:FindFirstChild("Humanoid") then
        local humanoid = nearest_npc.Humanoid
        
        if Is_CurrentlyOn then
            if humanoid.Health > 0 then
                local npc_pos = nearest_npc.HumanoidRootPart.Position + CurrentlyDir
                local pl_pos = game.Players.LocalPlayer.Character.HumanoidRootPart.Position
                if Is_CurrentTween then
                    Is_CurrentTween:Cancel()
                end
                local goal = {CFrame = CFrame.new(npc_pos)}
                local tweenInfo = Create_TweeningInformation(pl_pos, goal.CFrame.Position)
                Is_CurrentTween = TS_MainScript:Create(player.Character.HumanoidRootPart, tweenInfo, goal)
                Is_CurrentTween:Play()
            else
                nearest_npc.HumanoidRootPart.CFrame = player.Character.HumanoidRootPart.CFrame * CFrame.new(0, 900, 0)
                CameraHumanoid = player.Character:FindFirstChild("Humanoid")
                Camera.CameraSubject = CameraHumanoid
            end
        else
            if humanoid.Health > 0 then
                local npc_pos = nearest_npc.HumanoidRootPart.Position + CurrentlyDir
                player.Character.HumanoidRootPart.CFrame = CFrame.new(npc_pos)
            else
                nearest_npc.HumanoidRootPart.CFrame = player.Character.HumanoidRootPart.CFrame * CFrame.new(0, 900, 0)
                CameraHumanoid = player.Character:FindFirstChild("Humanoid")
                Camera.CameraSubject = CameraHumanoid
            end
        end
    end
end

-- Hitbox nearest npc[Func]
function hitbox_nearest_npc()
    local nearest_npc_4hb = nil
    local nearest_dis_4hb = math.huge
    local detect_dis_4hb = 1000
    
    for _, npc_4hb in pairs(game.Workspace.Enemies:GetChildren()) do
        if npc_4hb:IsA("Model") and npc_4hb:FindFirstChild("HumanoidRootPart") then
            local distance = (player.Character.HumanoidRootPart.Position - npc_4hb.HumanoidRootPart.Position).magnitude
            
            if distance < nearest_dis_4hb and distance <= detect_dis_4hb then
                nearest_dis_4hb = distance
                nearest_npc_4hb = npc_4hb
            end
        end
    end
    
    if nearest_npc_4hb then
        nearest_npc_4hb.HumanoidRootPart.Size = Vector3.new(120, 120, 120)
        nearest_npc_4hb.HumanoidRootPart.CanCollide = false
        nearest_npc_4hb.Humanoid.PlatformStand = true
        nearest_npc_4hb.Humanoid.WalkSpeed = 0
        CameraHumanoid = nearest_npc_4hb:FindFirstChild("Humanoid")
        Camera.CameraSubject = CameraHumanoid
    end
end

local BHaki = false
function Bought_AllHaki()
    if not BHaki then
        BHaki = true
        local args = {
            [1] = "BuyHaki",
            [2] = "Geppo"
        }
        
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
        Ntf("+Alert:", "Successfully Buy Geppo, if not watch your money!", 1)
        wait(0.01)
        local args = {
            [1] = "BuyHaki",
            [2] = "Buso"
        }
        
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
        Ntf("+Alert:", "Successfully Buy Buso Haki, if not watch your money!", 1)
        wait(0.01)
        local args = {
            [1] = "BuyHaki",
            [2] = "Soru"
        }
        
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
        Ntf("+Alert:", "Successfully Buy Soru, if not watch your money!", 1)
        wait(0.01)
        Ntf("+Alert:", "Completed Buy All Haki.", 2)
        BHaki = false
        ALLHAKI.Text = "Learn All Haki"
    else
        ALLHAKI.Text = "Waiting for it..."
    end
end

-- Active Button[Func]
local Is_UIVisible = false
TOGGLER_GUI.MouseButton1Click:Connect(function()
    if Is_UIVisible then
        DRAGGING_FRAME.Visible = false
        SCROLLINGFRAME_ULT.Visible = false
        TOGGLER_GUI.Text = "â—‡Zero"
        Is_UIVisible = false
    else
        DRAGGING_FRAME.Visible = true
        SCROLLINGFRAME_ULT.Visible = true
        TOGGLER_GUI.Text = "â–¡Nine"
        Is_UIVisible = true
    end
end)

local Is_InUseMode = false
SWITCHINGMODE_MISC.MouseButton1Click:Connect(function()
    if Is_InUseMode then
        
        if Is_CurrentlyOn and Is_CurrentTween then
            Is_CurrentTween:Cancel()
        end
        SWITCHINGMODE_MISC.TextColor3 = Yellow
        SWITCHINGMODE_MISC.Text = "Teleportation"
        Is_CurrentlyOn = false
        Is_InUseMode = false
    else
        
        
        SWITCHINGMODE_MISC.TextColor3 = SkyBlue
        SWITCHINGMODE_MISC.Text = "Tweening Position"
        Is_CurrentlyOn = true
        Is_InUseMode = true
    end
end)

local dir_autofarm_x
dir_autofarm_x = 0
SWITCHINGDIRECTION_MISC.MouseButton1Click:Connect(function()
    dir_autofarm_x = dir_autofarm_x + 1
    if dir_autofarm_x == 1 then
        SWITCHINGDIRECTION_MISC.TextColor3 = Green
        SWITCHINGDIRECTION_MISC.Text = "Dir: On Side"
        CurrentlyDir = DirOnSide
    elseif dir_autofarm_x == 2 then
        SWITCHINGDIRECTION_MISC.TextColor3 = Red
        SWITCHINGDIRECTION_MISC.Text = "Dir: Below Ground"
        CurrentlyDir = DirBelowGround
    elseif dir_autofarm_x == 3 then
        dir_autofarm_x = 0
        SWITCHINGDIRECTION_MISC.TextColor3 = SkyBlue
        SWITCHINGDIRECTION_MISC.Text = "Dir: On Top"
        CurrentlyDir = DirOnTop
    end
end)

TPSPEED_MISC.FocusLost:Connect(function(enterPressed)
    if enterPressed then
        local NEW_Speed = tonumber(TPSPEED_MISC.Text)
        if NEW_Speed and NEW_Speed > 0 then
            TweenSpeed_X01 = NEW_Speed
        else
            warn("Invalid Tweening Speed: " .. tostring(TPSPEED_MISC.Text))
        end
    end
end)

local size_xcount
size_xcount = 0
HUD_SIZETRANSFORMATION.MouseButton1Click:Connect(function()
    size_xcount = size_xcount + 1
    if size_xcount == 1 then
        HUD_SIZETRANSFORMATION.Text = "Size: Small"
        DRAGGING_FRAME.Size = DFrame_Small
    elseif size_xcount == 2 then
        HUD_SIZETRANSFORMATION.Text = "Size: Big"
        DRAGGING_FRAME.Size = DFrame_Big
    elseif size_xcount == 3 then
        size_xcount = 0
        HUD_SIZETRANSFORMATION.Text = "Size: Default"
        DRAGGING_FRAME.Size = DFrame_Default
    end
end)

local Is_OnUseMiniButtonToggled = false
ON_USE_MINIBUTTON.MouseButton1Click:Connect(function()
    if Is_OnUseMiniButtonToggled then
        
        -- All MiniButton OFF --
        STARTNEAREST_FARM_MiniButton.Visible = false
        
        ON_USE_MINIBUTTON.TextColor3 = White
        ON_USE_MINIBUTTON.Text = "USE MINI BUTTON: NO"
        InUse_MiniButton = false
        Is_OnUseMiniButtonToggled = false
    else
        
        
        ON_USE_MINIBUTTON.TextColor3 = Green
        ON_USE_MINIBUTTON.Text = "USE MINI BUTTON: YES"
        InUse_MiniButton = true
        Is_OnUseMiniButtonToggled = true
    end
end)

local Is_MiniButton_1 = false
CONFIGS_FARM.MouseButton1Click:Connect(function()
    if Is_MiniButton_1 then
        
        SWITCHINGDIRECTION_MISC.Visible = false
        SWITCHINGMODE_MISC.Visible = false
        TPSPEED_MISC.Visible = false
        CONFIGS_FARM.TextColor3 = White
        Is_MiniButton_1 = false
    else
        
        SWITCHINGDIRECTION_MISC.Visible = true
        SWITCHINGMODE_MISC.Visible = true
        TPSPEED_MISC.Visible = true
        CONFIGS_FARM.TextColor3 = Green
        Is_MiniButton_1 = true
    end
end)

local Is_AutoNearestFarmOn = false
STARTNEAREST_FARM.MouseButton1Click:Connect(function()
    if Is_AutoNearestFarmOn then
        Is_AutoNearestFarmOn = false
        STARTNEAREST_FARM.Text = "Auto Farm Nearest: OFF"
        STARTNEAREST_FARM.TextColor3 = White
        CameraHumanoid = player.Character:FindFirstChild("Humanoid")
        Camera.CameraSubject = CameraHumanoid
    else
        Is_AutoNearestFarmOn = true
        STARTNEAREST_FARM.Text = "Auto Farm Nearest: ON"
        STARTNEAREST_FARM.TextColor3 = Green
        if InUse_MiniButton then
            STARTNEAREST_FARM_MiniButton.Visible = true
        else
            rs.RenderStepped:Connect(function(deltaTime)
                if Is_AutoNearestFarmOn and not Is_OnUseMiniButtonToggled then
                    find_nearest_npc()
                    hitbox_nearest_npc()
                    VU:CaptureController()
                    VU:ClickButton1(Vector2.new(4, 0, 4))
                end
            end)
        end
    end
end)

REROLLING_FRUITS.MouseButton1Click:Connect(function()
    local args = {
    [1] = "Cousin",
    [2] = "Buy"
    }
    
    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
    task.wait()
    if CurrentLevel >= 50 then
        Ntf("Random Fruits", "Successfully Rerolling a Fruit for u, if not then you're does not have enough money!", 2)
    else
        Ntf("Random Fruits", "UnSuccessfully Rerolling a Fruit for u, because you're is level:" .. CurrentLevel .. " it's below 50 the number requires for allowing gacha!")
    end
end)

BOUGHTSWORD.FocusLost:Connect(function(enterPressed)
    if enterPressed then
        local rawfruits = BOUGHTSWORD.Text
        if rawfruits ~= "" then
            local args = {
                [1] = "PurchaseRawFruit",
                [2] = rawfruits,
                [3] = false
            }
            game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
            BOUGHTSWORD.Text = ""
            
            if rawfruits == "/fruit?" then
                Ntf("Test", "It works, just for testing.", 2)
                task.wait(1)
                BOUGHTSWORD.Text = ""
            end
        end
    end
end)

BOUGHTGUN.FocusLost:Connect(function(enterPressed)
    if enterPressed then
        local itemget = BOUGHTGUN.Text
        if itemget ~= "" then
            local args = {
                [1] = "BuyItem",
                [2] = itemget
            }
            game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
            BOUGHTGUN.Text = ""
            
            if itemget == "/item?" then
                Ntf("Test", "It works too...", 2)
                task.wait(1)
                BOUGHTGUN.Text = ""
            end
        end
    end
end)

ALLHAKI.MouseButton1Click:Connect(Bought_AllHaki)

-- MiniButton of STARTNEAREST_FARM[1]
local InUse_NearestFarm_MiniButton = false
STARTNEAREST_FARM_MiniButton.MouseButton1Click:Connect(function()
    if InUse_NearestFarm_MiniButton then
        
        STARTNEAREST_FARM_MiniButton.TextColor3 = White
        STARTNEAREST_FARM_MiniButton.Text = "Nearest Farm: OFF"
        InUse_NearestFarm_MiniButton = false
        CameraHumanoid = player.Character:FindFirstChild("Humanoid")
        Camera.CameraSubject = CameraHumanoid
        
        if Is_AutoNearestFarmOn then
            Is_AutoNearestFarmOn = false
            STARTNEAREST_FARM.TextColor3 = White
            STARTNEAREST_FARM.Text = "Auto Farm Nearest: OFF"
        end
    else
        
        STARTNEAREST_FARM_MiniButton.TextColor3 = Purple
        STARTNEAREST_FARM_MiniButton.Text = "Nearest Farm: ON"
        InUse_NearestFarm_MiniButton = true
        
        if Is_AutoNearestFarmOn then
            Is_AutoNearestFarmOn = false
            STARTNEAREST_FARM.TextColor3 = White
            STARTNEAREST_FARM.Text = "Auto Farm Nearest: OFF"
        end
        rs.RenderStepped:Connect(function(deltaTime)
            if InUse_NearestFarm_MiniButton and InUse_MiniButton then
                find_nearest_npc()
                hitbox_nearest_npc()
                VU:CaptureController()
                VU:ClickButton1(Vector2.new(4, 0, 4))
            end
        end)
    end
end)

-- Ult Button [Variable]
local Is_SFUIVisible = false
local Is_SFUIVisible_2 = false
local Is_SFUIVisible_3 = false
local Is_SFUIVisible_4 = false
local Is_SFUIVisible_5 = false

function setVisible_Ult()
    Is_SFUIVisible = false
    Is_SFUIVisible_2 = false
    Is_SFUIVisible_3 = false
    Is_SFUIVisible_4 = false
    Is_SFUIVisible_5 = false
end

function setVisible_Ult_1()
    CONFIGS_SCROLLINGFRAME.Visible = false
    FARM_SCROLLINGFRAME.Visible = false
    TELEPORT_SCROLLINGFRAME.Visible = false
    PLAYER_SCROLLINGFRAME.Visible = false
    SHOP_SCRLF.Visible = false
    Configs_MainScript.TextColor3 = White
    Farm_MainScript.TextColor3 = White
    Tp_MainScript.TextColor3 = White
    PVP_MainScript.TextColor3 = White
    Shop_MainScript.TextColor3 = White
end

-- Ult Button[Slot:1]
Configs_MainScript.MouseButton1Click:Connect(function()
    if Is_SFUIVisible then
        CONFIGS_SCROLLINGFRAME.Visible = false
        Configs_MainScript.TextColor3 = White
        Is_SFUIVisible = false
    else
        setVisible_Ult()
        setVisible_Ult_1()
        task.wait()
        CONFIGS_SCROLLINGFRAME.Visible = true
        Configs_MainScript.TextColor3 = Green
        Is_SFUIVisible = true
    end
end)

-- [Slot:2]
Farm_MainScript.MouseButton1Click:Connect(function()
    if Is_SFUIVisible_2 then
        FARM_SCROLLINGFRAME.Visible = false
        Farm_MainScript.TextColor3 = White
        Is_SFUIVisible_2 = false
    else
        setVisible_Ult()
        setVisible_Ult_1()
        task.wait()
        FARM_SCROLLINGFRAME.Visible = true
        Farm_MainScript.TextColor3 = Green
        Is_SFUIVisible_2 = true
    end
end)

-- [Slot:3]
Tp_MainScript.MouseButton1Click:Connect(function()
    if Is_SFUIVisible_3 then
        TELEPORT_SCROLLINGFRAME.Visible = false
        Tp_MainScript.TextColor3 = White
        Is_SFUIVisible_3 = false
    else
        setVisible_Ult()
        setVisible_Ult_1()
        task.wait()
        TELEPORT_SCROLLINGFRAME.Visible = true
        Tp_MainScript.TextColor3 = Green
        Is_SFUIVisible_3 = true
    end
end)

-- [Slot:4]
PVP_MainScript.MouseButton1Click:Connect(function()
    if Is_SFUIVisible_4 then
        PLAYER_SCROLLINGFRAME.Visible = false
        PVP_MainScript.TextColor3 = White
        Is_SFUIVisible_4 = false
    else
        setVisible_Ult()
        setVisible_Ult_1()
        task.wait()
        PLAYER_SCROLLINGFRAME.Visible = true
        PVP_MainScript.TextColor3 = Green
        Is_SFUIVisible_4 = true
    end
end)

-- [Slot:5]
Shop_MainScript.MouseButton1Click:Connect(function()
    if Is_SFUIVisible_5 then
        SHOP_SCRLF.Visible = false
        Shop_MainScript.TextColor3 = White
        Is_SFUIVisible_5 = false
    else
        setVisible_Ult()
        setVisible_Ult_1()
        task.wait()
        SHOP_SCRLF.Visible = true
        Shop_MainScript.TextColor3 = Green
        Is_SFUIVisible_5 = true
    end
end)

-- Ult_Button Effects[4fun]
function UltB_Effects(ULT_B, Col_B, Col_B2)
    ULT_B.MouseEnter:Connect(function()
        ULT_B.BackgroundColor3 = Col_B
    end)
    
    ULT_B.MouseLeave:Connect(function()
        ULT_B.BackgroundColor3 = Col_B2
    end)
end

UltB_Effects(Configs_MainScript, Yellow, Black)
UltB_Effects(Farm_MainScript, Yellow, Black)
UltB_Effects(Tp_MainScript, Yellow, Black)
UltB_Effects(PVP_MainScript, Yellow, Black)
UltB_Effects(Shop_MainScript, Yellow, Black)


-- Update[TextButton.Text]
local all_exist_buttons = {
    TOGGLER_GUI
}

local function Update_buttons_text(index, N_Text)
    if all_exist_buttons[index] then
        all_exist_buttons[index].Text = N_Text
    end
end

local function Start_Update_All_Button()
    if _G.AllButton_Text and #_G.AllButton_Text == 1 then
        for i = 1, 1 do
            Update_buttons_text(i, _G.AllButton_Text[i])
        end
    end
end

-- RunService[RS]
local RS = game:GetService("RunService")

RS.RenderStepped:Connect(function(deltaTime)
    Start_Update_All_Button()
end)

-- Keep Script On [HaHa]
local teleportexecute = (syn and syn.queue_on_teleport) or queue_on_teleport or (fluxus and fluxus.queue_on_teleport)

local TeleportCheck = false
Players.LocalPlayer.OnTeleport:Connect(function(State)
    if KeepScript and (not TeleportCheck) and teleportexecute then
        TeleportCheck = true
        teleportexecute("loadstring(game:HttpGet('https://raw.githubusercontent.com/NganHa2k3/Tensura/refs/heads/place_1/BloxFruits_VN_UpdateVersion01'))()")
    end
end)

if teleportexecute then
    wait(1)
    print("<NganHa2k3 Script - KeepScript is On>")
    KeepScript = true
else
    warn("Missing queue_on_teleport")
end
