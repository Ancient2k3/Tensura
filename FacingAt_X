local Players = game:GetService("Players")
local player = Players.LocalPlayer

local function StareAt(targetPlayerName, shouldStare)
    local targetPlayer = Players:FindFirstChild(targetPlayerName)
    
    if not targetPlayer or not targetPlayer.Character then
        return
    end
    
    local localCharacter = player.Character
    local targetCharacter = targetPlayer.Character
    if not localCharacter or not localCharacter:FindFirstChild("HumanoidRootPart") or
       not targetCharacter:FindFirstChild("HumanoidRootPart") then
        return
    end

    local function StareFunction()
        local localChar = player.Character
        local targetChar = targetPlayer.Character
        
        if localChar and targetChar then
            local charPos = localChar.HumanoidRootPart.Position
            local targetPos = targetChar.HumanoidRootPart.Position
            local modTPos = Vector3.new(targetPos.X, charPos.Y, targetPos.Z)
            local newCF = CFrame.new(charPos, modTPos)
            localChar:SetPrimaryPartCFrame(newCF)
        end
    end

    if shouldStare then
        local StareLoop
        StareLoop = game:GetService("RunService").RenderStepped:Connect(function()
            if targetPlayer and targetPlayer.Character then
                StareFunction()
            else
                if StareLoop then
                    StareLoop:Disconnect()
                end
            end
        end)
    else
        if StareLoop then
            StareLoop:Disconnect()
        end
    end
end

_G.LookAt = StareAt
