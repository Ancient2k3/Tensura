local function PX_X(otherPlayerUsername, shouldLoop)
    local player = game.Players.LocalPlayer
    local targetPlayer = game.Players:FindFirstChild(otherPlayerUsername)

    if targetPlayer and targetPlayer.Character and player.Character then
        local localChar = player.Character
        local targetChar = targetPlayer.Character

        local function StareFunction()
            local localChar = player.Character
            local targetChar = targetPlayer.Character
            
            if localChar and targetChar then
                local charPos = localChar.HumanoidRootPart.Position
                local targetPos = targetChar.HumanoidRootPart.Position
                local modTPos = Vector3.new(targetPos.X, charPos.Y, targetPos.Z)
                local newCF = CFrame.new(charPos, modTPos)
                localChar:SetPrimaryPartCFrame(newCF)
            end
        end

        local connection  -- Declare connection variable

        -- Loop functionality if shouldLoop is true
        if shouldLoop then
            local rs = game:GetService("RunService")
            connection = rs.RenderStepped:Connect(function(deltaTime)
                if targetPlayer and targetPlayer.Character and localChar and targetChar then
                    StareFunction()
                end
            end)
        else
            -- Run StareFunction once if shouldLoop is false
            StareFunction()
            targetPlayer = nil  -- Clear the targetPlayer when shouldLoop is false
            
            -- If RenderStepped was connected earlier, disconnect it
            if connection then
                connection:Disconnect()
            end
        end
    else
        warn("Target player or their character not found!")
    end
end

_G.AimLockedAt = PX_X

print("loadstring 'FacingAt_X' successfully executed, without an error!")
