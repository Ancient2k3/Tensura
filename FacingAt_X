local stareLoop = nil

function RotateToPlayer(targetPlayer)
    if stareLoop then
        stareLoop:Disconnect()
    end

    if not Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart") or not targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
        return
    end

    local function stareFunc()
        local chrPos = Players.LocalPlayer.Character.PrimaryPart.Position
        local tPos = targetPlayer.Character.HumanoidRootPart.Position
        local modTPos = Vector3.new(tPos.X, chrPos.Y, tPos.Z)
        local newCF = CFrame.new(chrPos, modTPos)
        Players.LocalPlayer.Character:SetPrimaryPartCFrame(newCF)
    end

    stareLoop = RunService.RenderStepped:Connect(stareFunc)
end

function StopRotating()
    if stareLoop and stareLoop.Connected then
        stareLoop:Disconnect()
        stareLoop = nil
    end
end

_G.stareat = function(playerName)
    local targetPlayer = Players:FindFirstChild(playerName)
    if targetPlayer then
        RotateToPlayer(targetPlayer)
    end
end

_G.unstareat = function()
    StopRotating()
end
