-- Remove Existed One --
local player = game.Players.LocalPlayer
local screenGuiName = "BloxFruitsMyUIVN"

for _, gui in ipairs(player:WaitForChild("PlayerGui"):GetChildren()) do
    if gui:IsA("ScreenGui") and gui.Name == screenGuiName then
        gui:Destroy()
    end
end

-- Blox Fruits UI V4 VN --

local ScreenGui = Instance.new("ScreenGui")
local OpenClose = Instance.new("TextButton")
local HoldBoatName = Instance.new("TextBox")
local ScrollingFrame = Instance.new("ScrollingFrame")
local ChestBox = Instance.new("ScrollingFrame")
local BuyStuffBox = Instance.new("ScrollingFrame")
local SwitchFightingStyle = Instance.new("ScrollingFrame")
local BoatSelection = Instance.new("ScrollingFrame")


ScreenGui.Parent = game.CoreGui
ScreenGui.Name = "BloxFruitsMyUIVN"

-- More ScrollingFrame --

ChestBox.Parent = ScreenGui
ChestBox.Size = UDim2.new(0.1, 0, 0.2, 0)
ChestBox.Position = UDim2.new(-1, 0, 0.2, 0)
ChestBox.BackgroundColor3 = Color3.new(0, 0, 0)
ChestBox.BackgroundTransparency = 0.5
ChestBox.CanvasSize = UDim2.new(0, 0, 2, 0)
ChestBox.ScrollBarThickness = 0.1

BuyStuffBox.Parent = ScreenGui
BuyStuffBox.Size = UDim2.new(0.1, 0, 0.2, 0)
BuyStuffBox.Position = UDim2.new(-1, 0, 0.2, 0)
BuyStuffBox.BackgroundColor3 = Color3.new(0, 0, 0)
BuyStuffBox.BackgroundTransparency = 0.5
BuyStuffBox.CanvasSize = UDim2.new(0, 0, 2, 0)
BuyStuffBox.ScrollBarThickness = 0.1

SwitchFightingStyle.Parent = ScreenGui
SwitchFightingStyle.Size = UDim2.new(0.1, 0, 0.2, 0)
SwitchFightingStyle.Position = UDim2.new(-1, 0, 0.2, 0)
SwitchFightingStyle.BackgroundColor3 = Color3.new(0, 0, 0)
SwitchFightingStyle.BackgroundTransparency = 0.5
SwitchFightingStyle.CanvasSize = UDim2.new(0, 0, 2, 0)
SwitchFightingStyle.ScrollBarThickness = 0.1

BoatSelection.Parent = ScreenGui
BoatSelection.Size = UDim2.new(0.1, 0, 0.2, 0)
BoatSelection.Position = UDim2.new(-1, 0, 0.2, 0)
BoatSelection.BackgroundColor3 = Color3.new(0, 0, 0)
BoatSelection.BackgroundTransparency = 0.5
BoatSelection.CanvasSize = UDim2.new(0, 0, 2, 0)
BoatSelection.ScrollBarThickness = 0.1

-- More Button --

-- Function --

local tweenService = game:GetService("TweenService")
local tweenSpeed = 150 -- Default speed in studs per second

-- Function to calculate tween duration based on distance and speed
local function calculateTweenDuration(startPos, endPos, speed)
    local distance = (endPos - startPos).magnitude
    return distance / speed
end

-- Define a function to create tween information
local function createTweenInfo(startPos, endPos)
    local duration = calculateTweenDuration(startPos, endPos, tweenSpeed)
    return TweenInfo.new(duration, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut)
end

-- Toggle mode variable
local isTweenMode = false
local currentTween = nil

-- Hold references to buttons and other UI elements
local teleportButtons = {}
local visibilityToggleButton, modeToggleButton, textBox, speedTextBox

-- Function to print all player names to the console
local function printAllPlayerNames()
    for _, player in pairs(game:GetService("Players"):GetPlayers()) do
        print(player.Name)
    end
end

-- Execute the printAllPlayerNames function immediately
printAllPlayerNames()

local LoopActivated_AllF = game:GetService("RunService")

-- Close Function --

ScrollingFrame.Parent = ScreenGui
ScrollingFrame.Size = UDim2.new(0.3, 0, 0.1, 0)  -- Adjusted to a more visible size
ScrollingFrame.Position = UDim2.new(1.2, 0, 0.28, 0)  -- Positioned in the center of the screen
ScrollingFrame.BackgroundColor3 = Color3.new(0, 0, 0)
ScrollingFrame.BackgroundTransparency = 0.5
ScrollingFrame.CanvasSize = UDim2.new(2, 0, 0, 0)  -- Wider canvas size to enable scrolling
ScrollingFrame.ScrollBarThickness = 0.1

local ScrollingFrameCorner = Instance.new("UICorner")
ScrollingFrameCorner.Parent = ScrollingFrame
ScrollingFrameCorner.CornerRadius = UDim.new(0, 10)

-- OpenClose Function --

OpenClose.Parent = ScreenGui
OpenClose.BackgroundColor3 = Color3.new(0, 0, 0)
OpenClose.BackgroundTransparency = 0.5
OpenClose.Size = UDim2.new(0.05, 0, 0.1, 0)  -- Adjusted size for better visibility
OpenClose.TextScaled = true
OpenClose.Position = UDim2.new(0.84, 0, -0.1, 0)  -- Positioned outside the ScrollingFrame
OpenClose.TextColor3 = Color3.new(1, 1, 1)
OpenClose.Font = Enum.Font.PatrickHand
OpenClose.Text = "Ⓗ"

local OpenCloseCorner = Instance.new("UICorner")
OpenCloseCorner.Parent = OpenClose
OpenCloseCorner.CornerRadius = UDim.new(0, 10)

HoldBoatName.Parent = ScreenGui
HoldBoatName.BackgroundColor3 = Color3.new(0, 0, 0)
HoldBoatName.BackgroundTransparency = 0.5
HoldBoatName.Size = UDim2.new(0.1, 0, 0.1, 0)  -- Adjusted size for better visibility
HoldBoatName.TextScaled = true
HoldBoatName.Position = UDim2.new(0.64, 0, -0.1, 0)  -- Positioned outside the ScrollingFrame
HoldBoatName.TextColor3 = Color3.new(1, 1, 1)
HoldBoatName.Font = Enum.Font.PatrickHand
HoldBoatName.Text = "Không có thuyền"

local HoldBoatNameCorner = Instance.new("UICorner")
HoldBoatNameCorner.Parent = HoldBoatName
HoldBoatNameCorner.CornerRadius = UDim.new(0, 10)

-- Create and configure TweenService

local TweenService = game:GetService("TweenService")
local tweenSpeedd = 1  -- Duration in seconds
local tweenInfo = TweenInfo.new(tweenSpeedd, Enum.EasingStyle.Quad, Enum.EasingDirection.InOut)

-- Define tween goals

local goalPosition1 = UDim2.new(0.6, 0, 0.28, 0)  -- Move ScrollingFrame down
local goalPosition2 = UDim2.new(1.2, 0, 0.28, 0)  -- Original position

-- Create tweens

local tween1 = TweenService:Create(ScrollingFrame, tweenInfo, {Position = goalPosition1})
local tween2 = TweenService:Create(ScrollingFrame, tweenInfo, {Position = goalPosition2})

-- Toggle button behavior

local isToggled = false
OpenClose.MouseButton1Click:Connect(function()
    if isToggled then
        tween2:Play()
        OpenClose.Text = "ⓧ"
        OpenClose.TextColor3 = Color3.new(0, 1, 0)
    else
        tween1:Play()
        OpenClose.Text = "Ⓗ"
        OpenClose.TextColor3 = Color3.new(1, 1, 1)
    end
    isToggled = not isToggled
end)

-- Done --

-- Button Ability Inside ScrollingFrame --

local button1 = Instance.new("TextButton")
button1.Parent = ScrollingFrame
button1.BackgroundColor3 = Color3.new(0, 0, 0)
button1.BackgroundTransparency = 0.5
button1.Size = UDim2.new(0.03, 0, 0.9, 0)  -- Adjusted size for better visibility
button1.TextScaled = true
button1.Position = UDim2.new(0.005, 0, 0, 0)  -- Positioned inside the ScrollingFrame
button1.TextColor3 = Color3.fromRGB(255, 255, 255)
button1.Font = Enum.Font.PatrickHand
button1.Text = "Nhặt Rương/Trái"

local button2 = Instance.new("TextButton")
button2.Parent = ScrollingFrame
button2.BackgroundColor3 = Color3.new(0, 0, 0)
button2.BackgroundTransparency = 0.5
button2.Size = UDim2.new(0.03, 0, 0.9, 0)  -- Adjusted size for better visibility
button2.TextScaled = true
button2.Position = UDim2.new(0.045, 0, 0, 0)  -- Positioned inside the ScrollingFrame
button2.TextColor3 = Color3.fromRGB(255, 255, 255)
button2.Font = Enum.Font.PatrickHand
button2.Text = "Chế độ: Dịch chuyển tức thời"

local button3 = Instance.new("TextBox")
button3.Parent = ScrollingFrame
button3.BackgroundColor3 = Color3.new(0, 0, 0)
button3.BackgroundTransparency = 0.5
button3.Size = UDim2.new(0.03, 0, 0.9, 0)  -- Adjusted size for better visibility
button3.TextScaled = true
button3.Position = UDim2.new(0.085, 0, 0, 0)  -- Positioned inside the ScrollingFrame
button3.TextColor3 = Color3.fromRGB(255, 255, 255)
button3.Font = Enum.Font.PatrickHand
button3.Text = tostring(tweenSpeed)
button3.ClearTextOnFocus = false

local button4 = Instance.new("TextBox")
button4.Parent = ScrollingFrame
button4.BackgroundColor3 = Color3.new(0, 0, 0)
button4.BackgroundTransparency = 0.5
button4.Size = UDim2.new(0.03, 0, 0.9, 0)  -- Adjusted size for better visibility
button4.TextScaled = true
button4.Position = UDim2.new(0.125, 0, 0, 0)  -- Positioned inside the ScrollingFrame
button4.TextColor3 = Color3.fromRGB(255, 255, 255)
button4.Font = Enum.Font.PatrickHand
button4.Text = "Ghi tên người chơi"
button4.ClearTextOnFocus = false

local Reset = Instance.new("TextButton")
Reset.Parent = ScrollingFrame
Reset.BackgroundColor3 = Color3.new(0, 0, 0)
Reset.BackgroundTransparency = 0.5
Reset.Size = UDim2.new(0.03, 0, 0.9, 0)
Reset.TextScaled = true
Reset.Position = UDim2.new(0.165, 0, 0, 0)
Reset.TextColor3 = Color3.new(1, 1, 1)
Reset.Font = Enum.Font.PatrickHand
Reset.Text = "Tự hủy Haha"

Reset.MouseButton1Click:Connect(function()
    game.Players.LocalPlayer.Character.Humanoid.Health = 0
end)

local Shop = Instance.new("TextButton")
Shop.Parent = ScrollingFrame
Shop.BackgroundColor3 = Color3.new(0, 0, 0)
Shop.BackgroundTransparency = 0.5
Shop.Size = UDim2.new(0.03, 0, 0.9, 0)
Shop.TextScaled = true
Shop.Position = UDim2.new(0.205, 0, 0, 0)
Shop.TextColor3 = Color3.new(1, 1, 1)
Shop.Font = Enum.Font.PatrickHand
Shop.Text = "Chợ mua vật phẩm"

local FightingStyle = Instance.new("TextButton")
FightingStyle.Parent = ScrollingFrame
FightingStyle.BackgroundColor3 = Color3.new(0, 0, 0)
FightingStyle.BackgroundTransparency = 0.5
FightingStyle.Size = UDim2.new(0.03, 0, 0.9, 0)
FightingStyle.TextScaled = true
FightingStyle.Position = UDim2.new(0.245, 0, 0, 0)
FightingStyle.TextColor3 = Color3.new(1, 1, 1)
FightingStyle.Font = Enum.Font.PatrickHand
FightingStyle.Text = "Đổi Võ/Melee"

local BoatButton = Instance.new("TextButton")
BoatButton.Parent = ScrollingFrame
BoatButton.BackgroundColor3 = Color3.new(0, 0, 0)
BoatButton.BackgroundTransparency = 0.5
BoatButton.Size = UDim2.new(0.03, 0, 0.9, 0)
BoatButton.TextScaled = true
BoatButton.Position = UDim2.new(0.285, 0, 0, 0)
BoatButton.TextColor3 = Color3.new(1, 1, 1)
BoatButton.Font = Enum.Font.PatrickHand
BoatButton.Text = "Triệu hồi thuyền/tàu"

local RaidChip = Instance.new("TextBox")
RaidChip.Parent = ScrollingFrame
RaidChip.BackgroundColor3 = Color3.new(0, 0, 0)
RaidChip.BackgroundTransparency = 0.5
RaidChip.Size = UDim2.new(0.03, 0, 0.9, 0)
RaidChip.TextScaled = true
RaidChip.Position = UDim2.new(0.325, 0, 0, 0)
RaidChip.TextColor3 = Color3.new(1, 1, 1)
RaidChip.Font = Enum.Font.PatrickHand
RaidChip.Text = "Nhập tên Chip Raid bằng Tiếng Anh"
RaidChip.ClearTextOnFocus = true

local ServerHop = Instance.new("TextButton")
ServerHop.Parent = ScrollingFrame
ServerHop.BackgroundColor3 = Color3.new(0, 0, 0)
ServerHop.BackgroundTransparency = 0.5
ServerHop.Size = UDim2.new(0.03, 0, 0.9, 0)  -- Adjusted size for better visibility
ServerHop.TextScaled = true
ServerHop.Position = UDim2.new(0.365, 0, 0, 0)  -- Positioned inside the ScrollingFrame
ServerHop.TextColor3 = Color3.new(1, 1, 1)
ServerHop.Font = Enum.Font.PatrickHand
ServerHop.Text = "Đổi Máy Chủ Nhanh"

local WalkOnAir = Instance.new("TextButton")
WalkOnAir.Parent = ScrollingFrame
WalkOnAir.BackgroundColor3 = Color3.new(0, 0, 0)
WalkOnAir.BackgroundTransparency = 0.5
WalkOnAir.Size = UDim2.new(0.03, 0, 0.9, 0)  -- Adjusted size for better visibility
WalkOnAir.TextScaled = true
WalkOnAir.Position = UDim2.new(0.405, 0, 0, 0)  -- Positioned inside the ScrollingFrame
WalkOnAir.TextColor3 = Color3.fromRGB(255, 255, 255)
WalkOnAir.Font = Enum.Font.PatrickHand
WalkOnAir.Text = "Trên mặt đất"

local isToggled = false
local part

WalkOnAir.MouseButton1Click:Connect(function()
    local player = game.Players.LocalPlayer

    if not isToggled then
        isToggled = true
        WalkOnAir.Text = "Trên không khí và nước"
        WalkOnAir.TextColor3 = Color3.fromRGB(0, 255, 255)

        part = Instance.new("Part")
        part.Size = Vector3.new(20, 0.2, 20)
        part.Position = Vector3.new(
            player.Character.HumanoidRootPart.Position.X,
            player.Character.HumanoidRootPart.Position.Y - 3.5,
            player.Character.HumanoidRootPart.Position.Z
        )
        part.Anchored = true
        part.Transparency = 1
        part.Parent = workspace
        
        local lockedY = part.Position.Y

        local function updatePartPosition()
            if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                part.Position = Vector3.new(
                    player.Character.HumanoidRootPart.Position.X,
                    lockedY,
                    player.Character.HumanoidRootPart.Position.Z
                )
            end
        end

        local updateConnection
        updateConnection = game:GetService("RunService").Heartbeat:Connect(function()
            if isToggled then
                updatePartPosition()
            else
                updateConnection:Disconnect()
            end
        end)

    else
        isToggled = false
        WalkOnAir.Text = "Trên mặt đất"
        WalkOnAir.TextColor3 = Color3.fromRGB(255, 255, 255)
        
        if part then
            part:Destroy()
            part = nil
        end
    end
end)

local GetQuestHunter = Instance.new("TextButton")
GetQuestHunter.Parent = ScrollingFrame
GetQuestHunter.BackgroundColor3 = Color3.new(0, 0, 0)
GetQuestHunter.BackgroundTransparency = 0.5
GetQuestHunter.Size = UDim2.new(0.03, 0, 0.9, 0)  -- Adjusted size for better visibility
GetQuestHunter.TextScaled = true
GetQuestHunter.Position = UDim2.new(0.445, 0, 0, 0)  -- Positioned inside the ScrollingFrame
GetQuestHunter.TextColor3 = Color3.fromRGB(255, 255, 255)
GetQuestHunter.Font = Enum.Font.PatrickHand
GetQuestHunter.Text = "Lấy nhiệm vụ thợ săn"

GetQuestHunter.MouseButton1Click:Connect(function()
    local args = {
    [1] = "PlayerHunter"
}

game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
    
    local CoreGui = game:GetService("StarterGui")
        CoreGui:SetCore("SendNotification", {
            Title = "Nhiệm vụ thợ săn",
            Text = "Đã lấy nhiệm vụ thợ săn, Tìm nó và hủy diệt cho phần thưởng !",
            Duration = 2,
        })
end)

local ChangeDashLength = Instance.new("TextBox")
ChangeDashLength.Parent = ScrollingFrame
ChangeDashLength.BackgroundColor3 = Color3.new(0, 0, 0)
ChangeDashLength.BackgroundTransparency = 0.5
ChangeDashLength.Size = UDim2.new(0.03, 0, 0.9, 0)  -- Adjusted size for better visibility
ChangeDashLength.TextScaled = true
ChangeDashLength.Position = UDim2.new(0.485, 0, 0, 0)  -- Positioned inside the ScrollingFrame
ChangeDashLength.TextColor3 = Color3.fromRGB(255, 255, 255)
ChangeDashLength.Font = Enum.Font.PatrickHand
ChangeDashLength.Text = "Lướt xa hơn"
ChangeDashLength.ClearTextOnFocus = true

local myself = game.Players.LocalPlayer
ChangeDashLength.FocusLost:Connect(function(enterPressed)
    local inputValue = tonumber(ChangeDashLength.Text)
    if inputValue then
        local character = game.Workspace.Characters[myself.Name]
        character:SetAttribute("DashLength", inputValue)
    else
        warn("Missing DashLength Value Number.")
    end
end)

local ChangeSpeedMultiplier = Instance.new("TextBox")
ChangeSpeedMultiplier.Parent = ScrollingFrame
ChangeSpeedMultiplier.BackgroundColor3 = Color3.new(0, 0, 0)
ChangeSpeedMultiplier.BackgroundTransparency = 0.5
ChangeSpeedMultiplier.Size = UDim2.new(0.03, 0, 0.9, 0)  -- Adjusted size for better visibility
ChangeSpeedMultiplier.TextScaled = true
ChangeSpeedMultiplier.Position = UDim2.new(0.525, 0, 0, 0)  -- Positioned inside the ScrollingFrame
ChangeSpeedMultiplier.TextColor3 = Color3.fromRGB(255, 255, 255)
ChangeSpeedMultiplier.Font = Enum.Font.PatrickHand
ChangeSpeedMultiplier.Text = "Tốc độ di chuyển"
ChangeSpeedMultiplier.ClearTextOnFocus = true

local myself0 = game.Players.LocalPlayer
ChangeSpeedMultiplier.FocusLost:Connect(function(enterPressed)
    local inputValue = tonumber(ChangeSpeedMultiplier.Text)
    if inputValue then
        local character = game.Workspace.Characters[myself0.Name]
        character:SetAttribute("SpeedMultiplier", inputValue)
    else
        warn("Missing SpeedMultiplier Value Number.")
    end
end)

local function LoopsTPP()
    local username = button4.Text
    local player = game:GetService("Players"):FindFirstChild(username)
    if player and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
        local targetPosition = player.Character.HumanoidRootPart.Position + Vector3.new(0, 2, 0)
        local playerPos = game.Players.LocalPlayer.Character.HumanoidRootPart.Position
        if isTweenMode then
            if currentTween then
                currentTween:Cancel()
            end

            local goal = {CFrame = CFrame.new(targetPosition)}
            local tweenInfo = createTweenInfo(playerPos, targetPosition)
            currentTween = tweenService:Create(game.Players.LocalPlayer.Character.HumanoidRootPart, tweenInfo, goal)
            currentTween:Play()
        else
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(targetPosition)
        end
    else
        warn("Player not found: " .. username)
    end
end

local LoopsPlayers = Instance.new("TextButton")
LoopsPlayers.Parent = ScrollingFrame
LoopsPlayers.BackgroundColor3 = Color3.new(0, 0, 0)
LoopsPlayers.BackgroundTransparency = 0.5
LoopsPlayers.Size = UDim2.new(0.03, 0, 0.9, 0)  -- Adjusted size for better visibility
LoopsPlayers.TextScaled = true
LoopsPlayers.Position = UDim2.new(0.565, 0, 0, 0)  -- Positioned inside the ScrollingFrame
LoopsPlayers.TextColor3 = Color3.fromRGB(255, 255, 255)
LoopsPlayers.Font = Enum.Font.PatrickHand
LoopsPlayers.Text = "Liên tục dịch chuyển"

local LPlayers = false
LoopsPlayers.MouseButton1Click:Connect(function()
    if LPlayers then
        LoopsPlayers.TextColor3 = Color3.fromRGB(255, 255, 255)
        
        LPlayers = false
    else
        LoopsPlayers.TextColor3 = Color3.fromRGB(0, 255, 0)
        
        LPlayers = true
        
        LoopActivated_AllF.RenderStepped:Connect(function(deltaTime)
            if LPlayers then
                LoopsTPP()
            end
        end)
    end
end)

local me = game:GetService("Players")
local myLocalPlayer = me.LocalPlayer

local function findNearestEnemy()
    local nearestEnemy = nil
    local nearestDistance = math.huge
    local maxDistance = 200

    for _, enemy in pairs(game.Workspace.Enemies:GetChildren()) do
        if enemy:IsA("Model") and enemy:FindFirstChild("HumanoidRootPart") then
            local distance = (myLocalPlayer.Character.HumanoidRootPart.Position - enemy.HumanoidRootPart.Position).magnitude
            
            if distance < nearestDistance and distance <= maxDistance then
                nearestDistance = distance
                nearestEnemy = enemy
            end
        end
    end
    
    if nearestEnemy then
        nearestEnemy.Humanoid.Health = 0
    end
end

local EnemiesHealthZero = Instance.new("TextButton")
EnemiesHealthZero.Parent = ScrollingFrame
EnemiesHealthZero.BackgroundColor3 = Color3.new(0, 0, 0)
EnemiesHealthZero.BackgroundTransparency = 0.5
EnemiesHealthZero.Size = UDim2.new(0.03, 0, 0.9, 0)  -- Adjusted size for better visibility
EnemiesHealthZero.TextScaled = true
EnemiesHealthZero.Position = UDim2.new(0.605, 0, 0, 0)  -- Positioned inside the ScrollingFrame
EnemiesHealthZero.TextColor3 = Color3.fromRGB(255, 255, 255)
EnemiesHealthZero.Font = Enum.Font.PatrickHand
EnemiesHealthZero.Text = "Giết Quái"

local EnemiesHP = false
EnemiesHealthZero.MouseButton1Click:Connect(function()
    if EnemiesHP then
        EnemiesHealthZero.TextColor3 = Color3.fromRGB(255, 255, 255)
        
        EnemiesHP = false
    else
        EnemiesHealthZero.TextColor3 = Color3.fromRGB(0, 255, 0)
        
        EnemiesHP = true
        
        LoopActivated_AllF.RenderStepped:Connect(function(deltaTime)
            if EnemiesHP then
                findNearestEnemy()
            end
        end)
    end
end)

local Ix = game:GetService("Players")
local IoLocalPlayer = Ix.LocalPlayer

local function HitBoxNearestEnemy()
    local nearestEnemy = nil
    local nearestDistance = math.huge
    local maxDistance = 200

    for _, enemy in pairs(game.Workspace.Enemies:GetChildren()) do
        if enemy:IsA("Model") and enemy:FindFirstChild("HumanoidRootPart") then
            local distance = (IoLocalPlayer.Character.HumanoidRootPart.Position - enemy.HumanoidRootPart.Position).magnitude
            
            if distance < nearestDistance and distance <= maxDistance then
                nearestDistance = distance
                nearestEnemy = enemy
            end
        end
    end
    
    if nearestEnemy then
        nearestEnemy.HumanoidRootPart.Size = Vector3.new(120, 120, 120)
        nearestEnemy.HumanoidRootPart.CanCollide = false
        nearestEnemy.Humanoid.WalkSpeed = 0
        nearestEnemy.Humanoid.PlatformStand = false
    end
end

local EnemiesHitBoxChanged = Instance.new("TextButton")
EnemiesHitBoxChanged.Parent = ScrollingFrame
EnemiesHitBoxChanged.BackgroundColor3 = Color3.new(0, 0, 0)
EnemiesHitBoxChanged.BackgroundTransparency = 0.5
EnemiesHitBoxChanged.Size = UDim2.new(0.03, 0, 0.9, 0)  -- Adjusted size for better visibility
EnemiesHitBoxChanged.TextScaled = true
EnemiesHitBoxChanged.Position = UDim2.new(0.685, 0, 0, 0)  -- Positioned inside the ScrollingFrame
EnemiesHitBoxChanged.TextColor3 = Color3.fromRGB(255, 255, 255)
EnemiesHitBoxChanged.Font = Enum.Font.PatrickHand
EnemiesHitBoxChanged.Text = "Tầm đánh rộng (Gần nhất)"

local EnemiesHBox = false
EnemiesHitBoxChanged.MouseButton1Click:Connect(function()
    if EnemiesHBox then
        EnemiesHitBoxChanged.TextColor3 = Color3.fromRGB(255, 255, 255)
        
        EnemiesHBox = false
    else
        EnemiesHitBoxChanged.TextColor3 = Color3.fromRGB(255, 255, 0)
        
        EnemiesHBox = true
        
        LoopActivated_AllF.RenderStepped:Connect(function(deltaTime)
            if EnemiesHBox then
                HitBoxNearestEnemy()
            end
        end)
    end
end)

local SwitchedTeams = Instance.new("TextButton")
SwitchedTeams.Parent = ScrollingFrame
SwitchedTeams.BackgroundColor3 = Color3.new(0, 0, 0)
SwitchedTeams.BackgroundTransparency = 0.5
SwitchedTeams.Size = UDim2.new(0.03, 0, 0.9, 0)  -- Adjusted size for better visibility
SwitchedTeams.TextScaled = true
SwitchedTeams.Position = UDim2.new(0.725, 0, 0, 0)  -- Positioned inside the ScrollingFrame
SwitchedTeams.TextColor3 = Color3.fromRGB(0, 255, 255)
SwitchedTeams.Font = Enum.Font.PatrickHand
SwitchedTeams.Text = "Hải Quân"

local SwitchedT = false
SwitchedTeams.MouseButton1Click:Connect(function()
    if SwitchedT then
        SwitchedTeams.TextColor3 = Color3.fromRGB(0, 255, 255)
        SwitchedTeams.Text = "Hải Quân"
        
        SwitchedT = false
        
        local args = {
    [1] = "SetTeam",
    [2] = "Marines"
}

game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
    else
        SwitchedTeams.TextColor3 = Color3.fromRGB(240, 190, 0)
        SwitchedTeams.Text = "Hải Tặc"
        
        SwitchedT = true
        
        local args = {
    [1] = "SetTeam",
    [2] = "Pirates"
}

game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
    end
end)

local ClickToggler = Instance.new("TextButton")
ClickToggler.Parent = ScrollingFrame
ClickToggler.Size = UDim2.new(0.03, 0, 0.9, 0)
ClickToggler.Position = UDim2.new(0.765, 0, 0, 0)
ClickToggler.BackgroundColor3 = Color3.new(0, 0, 0)
ClickToggler.BackgroundTransparency = 0.5
ClickToggler.TextScaled = true
ClickToggler.Font = Enum.Font.PatrickHand
ClickToggler.Text = "Tự động nhấp: Tắt"
ClickToggler.TextColor3 = Color3.new(1, 1, 1)

local VU = game:GetService("VirtualUser")

local IsClick = false
ClickToggler.MouseButton1Click:Connect(function()
    if IsClick then
        ClickToggler.Text = "Tự động nhấp: Tắt"
        ClickToggler.TextColor3 = Color3.new(1, 1, 1)
        
        IsClick = false
    else
        ClickToggler.Text = "Tự động nhấp: Bật"
        ClickToggler.TextColor3 = Color3.new(1, 0, 0)
        
        IsClick = true
        
        while IsClick do
            VU:CaptureController()
            VU:ClickButton1(Vector2.new(0.5, 0, 0.5))
            wait(0.1)
        end
    end
end)

-- Define tween goals

local goalPosition3 = UDim2.new(0, 0, 0.2, 0)  -- Move ChestBox down
local goalPosition4 = UDim2.new(-1, 0, 0.2, 0)  -- Original position

-- Create tweens

local tween3 = TweenService:Create(ChestBox, tweenInfo, {Position = goalPosition3})
local tween4 = TweenService:Create(ChestBox, tweenInfo, {Position = goalPosition4})

-- Toggle button behavior

local isToggled = false
button1.MouseButton1Click:Connect(function()
    if isToggled then
        tween4:Play()
    else
        tween3:Play()
    end
    isToggled = not isToggled
end)

-- Define tween goals

local goalPosition5 = UDim2.new(0.1, 0, 0.2, 0)  -- Move ChestBox down
local goalPosition6 = UDim2.new(-1, 0, 0.2, 0)  -- Original position

-- Create tweens

local tween5 = TweenService:Create(BuyStuffBox, tweenInfo, {Position = goalPosition5})
local tween6 = TweenService:Create(BuyStuffBox, tweenInfo, {Position = goalPosition6})

-- Toggle button behavior

local isToggled = false
Shop.MouseButton1Click:Connect(function()
    if isToggled then
        tween6:Play()
    else
        tween5:Play()
    end
    isToggled = not isToggled
end)

-- Define tween goals

local goalPosition7 = UDim2.new(0.2, 0, 0.2, 0)  -- Move ChestBox down
local goalPosition8 = UDim2.new(-1, 0, 0.2, 0)  -- Original position

-- Create tweens

local tween7 = TweenService:Create(SwitchFightingStyle, tweenInfo, {Position = goalPosition7})
local tween8 = TweenService:Create(SwitchFightingStyle, tweenInfo, {Position = goalPosition8})

-- Toggle button behavior

local isToggled = false
FightingStyle.MouseButton1Click:Connect(function()
    if isToggled then
        tween8:Play()
    else
        tween7:Play()
    end
    isToggled = not isToggled
end)

-- Define tween goals

local goalPosition9 = UDim2.new(0.3, 0, 0.2, 0)  -- Move ChestBox down
local goalPosition10 = UDim2.new(-1, 0, 0.2, 0)  -- Original position

-- Create tweens

local tween9 = TweenService:Create(BoatSelection, tweenInfo, {Position = goalPosition9})
local tween10 = TweenService:Create(BoatSelection, tweenInfo, {Position = goalPosition10})

-- Toggle button behavior

local isToggled = false
BoatButton.MouseButton1Click:Connect(function()
    if isToggled then
        tween10:Play()
    else
        tween9:Play()
    end
    isToggled = not isToggled
end)

button2.MouseButton1Click:Connect(function()
    isTweenMode = not isTweenMode
    button2.Text = isTweenMode and "Chế độ: Mọc cánh và bay đi" or "Chế độ: Dịch chuyển tức thời"
    button2.TextColor3 = isTweenMode and Color3.fromRGB(255, 255, 255) or Color3.fromRGB(255, 255, 255)
    
    if not isTweenMode and currentTween then
        currentTween:Cancel()
    end
end)

button3.FocusLost:Connect(function(enterPressed)
    if enterPressed then
        local newSpeed = tonumber(button3.Text)
        if newSpeed and newSpeed > 0 then
            tweenSpeed = newSpeed
        else
            warn("Invalid tween speed: " .. tostring(speedTextBox.Text))
        end
    end
end)

local ixcaq = game:GetService("Players")
local function autocorrectUsername()
    local input = button4.Text:lower()
    local matchedPlayer = nil

    for _, player in ipairs(ixcaq:GetPlayers()) do
        if player.Name:lower():sub(1, #input) == input then
            matchedPlayer = player.Name
            break
        end
    end

    if matchedPlayer then
        button4.Text = matchedPlayer
    else
        button4.Text = ""
    end
end

button4.FocusLost:Connect(function(enterPressed)
    if enterPressed then
        autocorrectUsername()
        button4:ReleaseFocus()
        local username = button4.Text
        local player = game:GetService("Players"):FindFirstChild(username)
        if player and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local targetPosition = player.Character.HumanoidRootPart.Position + Vector3.new(0, 2, 0)
            local playerPos = game.Players.LocalPlayer.Character.HumanoidRootPart.Position
            if isTweenMode then
                if currentTween then
                    currentTween:Cancel()
                end

                local goal = {CFrame = CFrame.new(targetPosition)}
                local tweenInfo = createTweenInfo(playerPos, targetPosition)
                currentTween = tweenService:Create(game.Players.LocalPlayer.Character.HumanoidRootPart, tweenInfo, goal)
                currentTween:Play()
            else
                game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(targetPosition)
            end
        else
            warn("Player not found: " .. username)
        end
    end
end)

RaidChip.FocusLost:Connect(function(enterPressed)
    local chip = RaidChip.Text
    print("Chip value:", chip)  -- Debugging line

    local args = {
        [1] = "RaidsNpc",
        [2] = "Select",
        [3] = chip
    }

    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))

task.wait(0.1)

    local CoreGui = game:GetService("StarterGui")
    CoreGui:SetCore("SendNotification", {
        Title = "Chìa Khóa Tập Kích",
        Text = "Bạn đã mua, Chìa Khóa Tập Kích: " .. chip .. ", nếu không có nghĩa là bạn không có đủ tiền random!",
        Duration = 2,
    })

task.wait(1)

    fireclickdetector(workspace.Map.CircleIsland.RaidSummon2.Button.Main.ClickDetector)

local CoreGui = game:GetService("StarterGui")
    CoreGui:SetCore("SendNotification", {
        Title = "Đang Tải Bản Đồ",
        Text = "Đang Gia Nhập Tập Kích: " .. chip .. ", Xin Hãy Đợi 1 Chút !",
        Duration = 2,
    })
end)

ServerHop.MouseButton1Click:Connect(function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/NganHa2k3/Ability/main/ServerHop_Https"))()
    
    local CoreGui = game:GetService("StarterGui")

CoreGui:SetCore("SendNotification", {
    Title = "Thông Báo Hệ Thống",
    Text = "Danh sách máy chủ - Đã kích hoạt (Chờ tải....).",
    Duration = 10,
})
end)

-- Chest TP Function --

local function IfNotFoundGChest()
local chest = game:GetService("Workspace"):FindFirstChild("Chest1")
    if chest then
        local playerPos = game.Players.LocalPlayer.Character.HumanoidRootPart.Position
        if isTweenMode then
            if currentTween then
                currentTween:Cancel()
            end
            local goal = {CFrame = chest.CFrame + Vector3.new(0, 2, 0)}
            local tweenInfo = createTweenInfo(playerPos, goal.CFrame.Position)
            currentTween = tweenService:Create(game.Players.LocalPlayer.Character.HumanoidRootPart, tweenInfo, goal)
            currentTween:Play()
        else
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = chest.CFrame + Vector3.new(0, 2, 0)
        end
    else
        local CoreGui = game:GetService("StarterGui")
        CoreGui:SetCore("SendNotification", {
            Title = "Thông báo",
            Text = "Đã nhặt hết rương có trong trò chơi !",
            Duration = 2,
        })
    end
end

local function IfNotFoundDChest()
local chestg = game:GetService("Workspace"):FindFirstChild("Chest2")
    if chestg then
        local playerPos = game.Players.LocalPlayer.Character.HumanoidRootPart.Position
        if isTweenMode then
            if currentTween then
                currentTween:Cancel()
            end
            local goal = {CFrame = chestg.CFrame + Vector3.new(0, 2, 0)}
            local tweenInfo = createTweenInfo(playerPos, goal.CFrame.Position)
            currentTween = tweenService:Create(game.Players.LocalPlayer.Character.HumanoidRootPart, tweenInfo, goal)
            currentTween:Play()
        else
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = chestg.CFrame + Vector3.new(0, 2, 0)
        end
    else
        IfNotFoundGChest()
    end
end

local function CollectChest()
local chestd = game:GetService("Workspace"):FindFirstChild("Chest3")
    if chestd then
        local playerPos = game.Players.LocalPlayer.Character.HumanoidRootPart.Position
        if isTweenMode then
            if currentTween then
                currentTween:Cancel()
            end
            local goal = {CFrame = chestd.CFrame + Vector3.new(0, 2, 0)}
            local tweenInfo = createTweenInfo(playerPos, goal.CFrame.Position)
            currentTween = tweenService:Create(game.Players.LocalPlayer.Character.HumanoidRootPart, tweenInfo, goal)
            currentTween:Play()
        else
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = chestd.CFrame + Vector3.new(0, 2, 0)
        end
    else
        IfNotFoundDChest()
    end
end

local function FindingSilverChest()
local SearchingSilverChest = game:GetService("Workspace"):FindFirstChild("Chest1")
    if SearchingSilverChest then
        local playerPos = game.Players.LocalPlayer.Character.HumanoidRootPart.Position
        if isTweenMode then
            if currentTween then
                currentTween:Cancel()
            end
            local goal = {CFrame = SearchingSilverChest.CFrame + Vector3.new(0, 2, 0)}
            local tweenInfo = createTweenInfo(playerPos, goal.CFrame.Position)
            currentTween = tweenService:Create(game.Players.LocalPlayer.Character.HumanoidRootPart, tweenInfo, goal)
            currentTween:Play()
        else
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = SearchingSilverChest.CFrame + Vector3.new(0, 2, 0)
        end
    else
        local CoreGui = game:GetService("StarterGui")
        CoreGui:SetCore("SendNotification", {
            Title = "Thông báo tự động nhặt trái và rương",
            Text = "Đã thành công tự động nhặt hết trái và rương có trong trò chơi !",
            Duration = 1,
        })
    end
end

local function FindingGoldenChest()
local SearchingGoldenChest = game:GetService("Workspace"):FindFirstChild("Chest2")
    if SearchingGoldenChest then
        local playerPos = game.Players.LocalPlayer.Character.HumanoidRootPart.Position
        if isTweenMode then
            if currentTween then
                currentTween:Cancel()
            end
            local goal = {CFrame = SearchingGoldenChest.CFrame + Vector3.new(0, 2, 0)}
            local tweenInfo = createTweenInfo(playerPos, goal.CFrame.Position)
            currentTween = tweenService:Create(game.Players.LocalPlayer.Character.HumanoidRootPart, tweenInfo, goal)
            currentTween:Play()
        else
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = SearchingGoldenChest.CFrame + Vector3.new(0, 2, 0)
        end
    else
        FindingSilverChest()
    end
end

local function FindingDiamondChest()
local SearchingDiamondChest = game:GetService("Workspace"):FindFirstChild("Chest3")
    if SearchingDiamondChest then
        local playerPos = game.Players.LocalPlayer.Character.HumanoidRootPart.Position
        if isTweenMode then
            if currentTween then
                currentTween:Cancel()
            end
            local goal = {CFrame = SearchingDiamondChest.CFrame + Vector3.new(0, 2, 0)}
            local tweenInfo = createTweenInfo(playerPos, goal.CFrame.Position)
            currentTween = tweenService:Create(game.Players.LocalPlayer.Character.HumanoidRootPart, tweenInfo, goal)
            currentTween:Play()
        else
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = SearchingDiamondChest.CFrame + Vector3.new(0, 2, 0)
        end
    else
        FindingGoldenChest()
    end
end

local function CollectFruitandChest()
    local fruit = game:GetService("Workspace"):FindFirstChild("Fruit")
    
    if fruit and fruit:FindFirstChild("Handle") then
        local SearchingFruit = fruit.Handle
        local playerPos = game.Players.LocalPlayer.Character.HumanoidRootPart.Position
        
        if isTweenMode then
            if currentTween then
                currentTween:Cancel()
            end
            local goal = {CFrame = SearchingFruit.CFrame + Vector3.new(0, 2, 0)}
            local tweenInfo = createTweenInfo(playerPos, goal.CFrame.Position)
            currentTween = tweenService:Create(game.Players.LocalPlayer.Character.HumanoidRootPart, tweenInfo, goal)
            currentTween:Play()
        else
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = SearchingFruit.CFrame + Vector3.new(0, 2, 0)
        end
    else
        FindingDiamondChest()
    end
end

-- CFrame Mob TP --

local Im = game:GetService("Players")
local ILocalPlayer = Im.LocalPlayer

local function trackNearestEnemy()
    local nearestEnemy = nil
    local nearestDistance = math.huge
    local maxDistance = 1000

    for _, enemy in pairs(game.Workspace.Enemies:GetChildren()) do
        if enemy:IsA("Model") and enemy:FindFirstChild("HumanoidRootPart") then
            local distance = (ILocalPlayer.Character.HumanoidRootPart.Position - enemy.HumanoidRootPart.Position).magnitude
            
            if distance < nearestDistance and distance <= maxDistance then
                nearestDistance = distance
                nearestEnemy = enemy
            end
        end
    end

    if nearestEnemy and nearestEnemy:FindFirstChild("Humanoid") then
        local humanoid = nearestEnemy.Humanoid
        
        if isTweenMode then
            if humanoid.Health > 0 then
                local targetPosition = nearestEnemy.HumanoidRootPart.Position + Vector3.new(30, 0, 30)
                local playerPos = game.Players.LocalPlayer.Character.HumanoidRootPart.Position
                if currentTween then
                    currentTween:Cancel()
                end
                local goal = {CFrame = CFrame.new(targetPosition)}
                local tweenInfo = createTweenInfo(playerPos, goal.CFrame.Position)
                currentTween = tweenService:Create(ILocalPlayer.Character.HumanoidRootPart, tweenInfo, goal)
                currentTween:Play()
            else
                nearestEnemy.HumanoidRootPart.CFrame = ILocalPlayer.Character.HumanoidRootPart.CFrame * CFrame.new(0, 900, 0)
            end
        else
            if humanoid.Health > 0 then
                local targetPosition = nearestEnemy.HumanoidRootPart.Position + Vector3.new(30, 10, 30)
                ILocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(targetPosition)
            else
                nearestEnemy.HumanoidRootPart.CFrame = ILocalPlayer.Character.HumanoidRootPart.CFrame * CFrame.new(0, 900, 0)
            end
        end
    end
end

local EnemiesCFrameTo = Instance.new("TextButton")
EnemiesCFrameTo.Parent = ScrollingFrame
EnemiesCFrameTo.BackgroundColor3 = Color3.new(0, 0, 0)
EnemiesCFrameTo.BackgroundTransparency = 0.5
EnemiesCFrameTo.Size = UDim2.new(0.03, 0, 0.9, 0)  -- Adjusted size for better visibility
EnemiesCFrameTo.TextScaled = true
EnemiesCFrameTo.Position = UDim2.new(0.645, 0, 0, 0)  -- Positioned inside the ScrollingFrame
EnemiesCFrameTo.TextColor3 = Color3.fromRGB(255, 255, 255)
EnemiesCFrameTo.Font = Enum.Font.PatrickHand
EnemiesCFrameTo.Text = "Bay tới Quái (Con Gần Nhất)"

local EnemiesCF = false
EnemiesCFrameTo.MouseButton1Click:Connect(function()
    if EnemiesCF then
        EnemiesCFrameTo.TextColor3 = Color3.fromRGB(255, 255, 255)
        
        EnemiesCF = false
    else
        EnemiesCFrameTo.TextColor3 = Color3.fromRGB(255, 255, 0)
        
        EnemiesCF = true
        
        LoopActivated_AllF.RenderStepped:Connect(function(deltaTime)
            if EnemiesCF then
                trackNearestEnemy()
            end
        end)
    end
end)

-- Chest TP --

local SilverChest = Instance.new("TextButton")
SilverChest.Parent = ChestBox
SilverChest.BackgroundColor3 = Color3.new(0, 0, 0)
SilverChest.BackgroundTransparency = 0.5
SilverChest.Size = UDim2.new(0.8, 0, 0.05, 0)  -- Adjusted size for better visibility
SilverChest.TextScaled = true
SilverChest.Position = UDim2.new(0.1, 0, 0.005, 0)  -- Positioned inside the ScrollingFrame
SilverChest.TextColor3 = Color3.fromRGB(192, 192, 192)
SilverChest.Font = Enum.Font.PatrickHand
SilverChest.Text = "Lấy Rương Bạc"

SilverChest.MouseButton1Click:Connect(function()
    local chest = game:GetService("Workspace"):FindFirstChild("Chest1")
    if chest then
        local playerPos = game.Players.LocalPlayer.Character.HumanoidRootPart.Position
        if isTweenMode then
            if currentTween then
                currentTween:Cancel()
            end
            local goal = {CFrame = chest.CFrame + Vector3.new(0, 2, 0)}
            local tweenInfo = createTweenInfo(playerPos, goal.CFrame.Position)
            currentTween = tweenService:Create(game.Players.LocalPlayer.Character.HumanoidRootPart, tweenInfo, goal)
            currentTween:Play()
        else
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = chest.CFrame + Vector3.new(0, 2, 0)
        end
    else
        warn("Chest not found: Chest1")
    end
end)

local GoldenChest = Instance.new("TextButton")
GoldenChest.Parent = ChestBox
GoldenChest.BackgroundColor3 = Color3.new(0, 0, 0)
GoldenChest.BackgroundTransparency = 0.5
GoldenChest.Size = UDim2.new(0.8, 0, 0.05, 0)  -- Adjusted size for better visibility
GoldenChest.TextScaled = true
GoldenChest.Position = UDim2.new(0.1, 0, 0.085, 0)  -- Positioned inside the ScrollingFrame
GoldenChest.TextColor3 = Color3.new(1, 1, 0)
GoldenChest.Font = Enum.Font.PatrickHand
GoldenChest.Text = "Lấy Rương Vàng"

GoldenChest.MouseButton1Click:Connect(function()
    local chestg = game:GetService("Workspace"):FindFirstChild("Chest2")
    if chestg then
        local playerPos = game.Players.LocalPlayer.Character.HumanoidRootPart.Position
        if isTweenMode then
            if currentTween then
                currentTween:Cancel()
            end
            local goal = {CFrame = chestg.CFrame + Vector3.new(0, 2, 0)}
            local tweenInfo = createTweenInfo(playerPos, goal.CFrame.Position)
            currentTween = tweenService:Create(game.Players.LocalPlayer.Character.HumanoidRootPart, tweenInfo, goal)
            currentTween:Play()
        else
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = chestg.CFrame + Vector3.new(0, 2, 0)
        end
    else
        warn("Chest not found: Chest2")
    end
end)

local DiamondChest = Instance.new("TextButton")
DiamondChest.Parent = ChestBox
DiamondChest.BackgroundColor3 = Color3.new(0, 0, 0)
DiamondChest.BackgroundTransparency = 0.5
DiamondChest.Size = UDim2.new(0.8, 0, 0.05, 0)  -- Adjusted size for better visibility
DiamondChest.TextScaled = true
DiamondChest.Position = UDim2.new(0.1, 0, 0.165, 0)  -- Positioned inside the ScrollingFrame
DiamondChest.TextColor3 = Color3.new(0, 0, 1)
DiamondChest.Font = Enum.Font.PatrickHand
DiamondChest.Text = "Lấy Rương Kim Cương"

DiamondChest.MouseButton1Click:Connect(function()
    local chestd = game:GetService("Workspace"):FindFirstChild("Chest3")
    if chestd then
        local playerPos = game.Players.LocalPlayer.Character.HumanoidRootPart.Position
        if isTweenMode then
            if currentTween then
                currentTween:Cancel()
            end
            local goal = {CFrame = chestd.CFrame + Vector3.new(0, 2, 0)}
            local tweenInfo = createTweenInfo(playerPos, goal.CFrame.Position)
            currentTween = tweenService:Create(game.Players.LocalPlayer.Character.HumanoidRootPart, tweenInfo, goal)
            currentTween:Play()
        else
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = chestd.CFrame + Vector3.new(0, 2, 0)
        end
    else
        warn("Chest not found: Chest3")
    end
end)

local Boat = Instance.new("TextButton")
Boat.Parent = ChestBox
Boat.BackgroundColor3 = Color3.new(0, 0, 0)
Boat.BackgroundTransparency = 0.5
Boat.Size = UDim2.new(0.8, 0, 0.05, 0)  -- Adjusted size for better visibility
Boat.TextScaled = true
Boat.Position = UDim2.new(0.1, 0, 0.245, 0)  -- Positioned inside the ScrollingFrame
Boat.TextColor3 = Color3.new(1, 0, 1)
Boat.Font = Enum.Font.PatrickHand
Boat.Text = "Lấy Trái Ác Quỷ"

Boat.MouseButton1Click:Connect(function()
    local fruitx = game:GetService("Workspace")["Fruit "].Handle
    if fruitx then
        local playerPos = game.Players.LocalPlayer.Character.HumanoidRootPart.Position
        if isTweenMode then
            if currentTween then
                currentTween:Cancel()
            end
            local goal = {CFrame = fruitx.CFrame + Vector3.new(0, 2, 0)}
            local tweenInfo = createTweenInfo(playerPos, goal.CFrame.Position)
            currentTween = tweenService:Create(game.Players.LocalPlayer.Character.HumanoidRootPart, tweenInfo, goal)
            currentTween:Play()
        else
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = fruitx.CFrame + Vector3.new(0, 2, 0)
        end
    else
        warn("Chest not found: Fruit")
    end
end)

local DChestF = Instance.new("TextButton")
DChestF.Parent = ChestBox
DChestF.BackgroundColor3 = Color3.new(0, 0, 0)
DChestF.BackgroundTransparency = 0.5
DChestF.Size = UDim2.new(0.8, 0, 0.05, 0)  -- Adjusted size for better visibility
DChestF.TextScaled = true
DChestF.Position = UDim2.new(0.1, 0, 0.325, 0)  -- Positioned inside the ScrollingFrame
DChestF.TextColor3 = Color3.new(1, 1, 1)
DChestF.Font = Enum.Font.PatrickHand
DChestF.Text = "Nhặt trái và tất cả rương"

local DChest = false

DChestF.MouseButton1Click:Connect(function()
    if DChest then
        DChestF.TextColor3 = Color3.new(1, 1, 1)
        
        DChest = false
    else
        DChestF.TextColor3 = Color3.new(1, 1, 0)
        
        DChest = true
        
        while DChest do
            CollectFruitandChest()
            wait(1)
        end
    end
end)

local AChestF = Instance.new("TextButton")
AChestF.Parent = ChestBox
AChestF.BackgroundColor3 = Color3.new(0, 0, 0)
AChestF.BackgroundTransparency = 0.5
AChestF.Size = UDim2.new(0.8, 0, 0.05, 0)  -- Adjusted size for better visibility
AChestF.TextScaled = true
AChestF.Position = UDim2.new(0.1, 0, 0.405, 0)  -- Positioned inside the ScrollingFrame
AChestF.TextColor3 = Color3.new(1, 1, 1)
AChestF.Font = Enum.Font.PatrickHand
AChestF.Text = "Nhặt hết tất cả rương (Xui là bị kick)"

local AChest = false

AChestF.MouseButton1Click:Connect(function()
    if AChest then
        AChestF.TextColor3 = Color3.new(1, 1, 1)
        
        AChest = false
    else
        AChestF.TextColor3 = Color3.new(0, 1, 0)
        
        AChest = true
        
        while AChest do
            CollectChest()
            wait(0.0001)
        end
    end
end)

local CheckF = Instance.new("TextButton")
CheckF.Parent = ScreenGui
CheckF.BackgroundColor3 = Color3.new(0, 0, 0)
CheckF.BackgroundTransparency = 0.5
CheckF.Size = UDim2.new(0.05, 0, 0.1, 0)
CheckF.TextScaled = true
CheckF.Position = UDim2.new(0.3, 0, 0.6, 0)
CheckF.TextColor3 = Color3.new(1, 1, 1)
CheckF.Font = Enum.Font.PatrickHand
CheckF.Text = ""
CheckF.Visible = false

local CheckFUICorner = Instance.new("UICorner")
CheckFUICorner.Parent = CheckF
CheckFUICorner.CornerRadius = UDim.new(0.1, 0)

local function checkForFruit()
    local fruit = game:GetService("Workspace"):FindFirstChild("Fruit")
    if fruit and fruit:FindFirstChild("Handle") then
        CheckF.Text = "Có trái xuất hiện"
    else
        CheckF.Text = "Không có trái xuất hiện"
    end
end

local ACheckF = Instance.new("TextButton")
ACheckF.Parent = ChestBox
ACheckF.BackgroundColor3 = Color3.new(0, 0, 0)
ACheckF.BackgroundTransparency = 0.5
ACheckF.Size = UDim2.new(0.8, 0, 0.05, 0)  -- Adjusted size for better visibility
ACheckF.TextScaled = true
ACheckF.Position = UDim2.new(0.1, 0, 0.485, 0)  -- Positioned inside the ScrollingFrame
ACheckF.TextColor3 = Color3.new(1, 1, 1)
ACheckF.Font = Enum.Font.PatrickHand
ACheckF.Text = "Kiểm tra trái ác quỷ xuất hiện"

local ACheckFSet = false

ACheckF.MouseButton1Click:Connect(function()
    if ACheckFSet then
        ACheckF.TextColor3 = Color3.new(1, 1, 1)
        
        ACheckFSet = false
        
        CheckF.Visible = false
    else
        ACheckF.TextColor3 = Color3.new(0, 1, 0)
        
        ACheckFSet = true
        
        CheckF.Visible = true
        
        while ACheckFSet do
            checkForFruit()
            wait(0.1)
        end
    end
end)

CheckF.MouseButton1Click:Connect(function()
    local fruitcheckx = game:GetService("Workspace")["Fruit "].Handle
    if fruitcheckx then
        local playerPos = game.Players.LocalPlayer.Character.HumanoidRootPart.Position
        if isTweenMode then
            if currentTween then
                currentTween:Cancel()
            end
            local goal = {CFrame = fruitcheckx.CFrame + Vector3.new(0, 2, 0)}
            local tweenInfo = createTweenInfo(playerPos, goal.CFrame.Position)
            currentTween = tweenService:Create(game.Players.LocalPlayer.Character.HumanoidRootPart, tweenInfo, goal)
            currentTween:Play()
        else
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = fruitcheckx.CFrame + Vector3.new(0, 2, 0)
        end
    else
        warn("Chest not found: Fruit")
    end
end)

-- Shop --

local BuyItem1 = Instance.new("TextButton")
BuyItem1.Parent = BuyStuffBox
BuyItem1.BackgroundColor3 = Color3.new(0, 0, 0)
BuyItem1.BackgroundTransparency = 0.5
BuyItem1.Size = UDim2.new(0.8, 0, 0.05, 0)
BuyItem1.TextScaled = true
BuyItem1.Position = UDim2.new(0.1, 0, 0.005, 0)
BuyItem1.TextColor3 = Color3.new(1, 1, 1)
BuyItem1.Font = Enum.Font.PatrickHand
BuyItem1.Text = "Mua: Nhảy trên không khí"

BuyItem1.MouseButton1Click:Connect(function()
    local args = {
    [1] = "BuyHaki",
    [2] = "Geppo"
}

game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
end)

local BuyItem2 = Instance.new("TextButton")
BuyItem2.Parent = BuyStuffBox
BuyItem2.BackgroundColor3 = Color3.new(0, 0, 0)
BuyItem2.BackgroundTransparency = 0.5
BuyItem2.Size = UDim2.new(0.8, 0, 0.05, 0)
BuyItem2.TextScaled = true
BuyItem2.Position = UDim2.new(0.1, 0, 0.085, 0)
BuyItem2.TextColor3 = Color3.new(1, 1, 1)
BuyItem2.Font = Enum.Font.PatrickHand
BuyItem2.Text = "Mua: Haki cường hóa"

BuyItem2.MouseButton1Click:Connect(function()
    local args = {
    [1] = "BuyHaki",
    [2] = "Buso"
}

game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
end)

local BuyItem3 = Instance.new("TextButton")
BuyItem3.Parent = BuyStuffBox
BuyItem3.BackgroundColor3 = Color3.new(0, 0, 0)
BuyItem3.BackgroundTransparency = 0.5
BuyItem3.Size = UDim2.new(0.8, 0, 0.05, 0)
BuyItem3.TextScaled = true
BuyItem3.Position = UDim2.new(0.1, 0, 0.165, 0)
BuyItem3.TextColor3 = Color3.new(1, 1, 1)
BuyItem3.Font = Enum.Font.PatrickHand
BuyItem3.Text = "Mua: Tốc biến"

BuyItem3.MouseButton1Click:Connect(function()
    local args = {
    [1] = "BuyHaki",
    [2] = "Soru"
}

game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
end)

local RandomFruit = Instance.new("TextButton")
RandomFruit.Parent = BuyStuffBox
RandomFruit.BackgroundColor3 = Color3.new(0, 0, 0)
RandomFruit.BackgroundTransparency = 0.5
RandomFruit.Size = UDim2.new(0.8, 0, 0.05, 0)
RandomFruit.TextScaled = true
RandomFruit.Position = UDim2.new(0.1, 0, 0.245, 0)
RandomFruit.TextColor3 = Color3.new(1, 1, 1)
RandomFruit.Font = Enum.Font.PatrickHand
RandomFruit.Text = "Mua: Trái ngẫu nhiên"

RandomFruit.MouseButton1Click:Connect(function()
    local args = {
    [1] = "Cousin",
    [2] = "Buy"
}

game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))

    local CoreGui = game:GetService("StarterGui")
        CoreGui:SetCore("SendNotification", {
            Title = "Thông Báo",
            Text = "Bạn đã mua một trái ngẫu nhiên, nếu không có nghĩa là bạn không có đủ tiền random !",
            Duration = 2,
        })
end)

-- Switch Melee --

local DarkLeg = Instance.new("TextButton")
DarkLeg.Parent = SwitchFightingStyle
DarkLeg.BackgroundColor3 = Color3.new(0, 0, 0)
DarkLeg.BackgroundTransparency = 0.5
DarkLeg.Size = UDim2.new(0.8, 0, 0.05, 0)
DarkLeg.TextScaled = true
DarkLeg.Position = UDim2.new(0.1, 0, 0.005, 0)
DarkLeg.TextColor3 = Color3.new(1, 1, 1)
DarkLeg.Font = Enum.Font.PatrickHand
DarkLeg.Text = "Lấy võ: Chân đen v1"

DarkLeg.MouseButton1Click:Connect(function()
    local args = {
    [1] = "BuyBlackLeg"
}

game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
end)

local ElectricClaw = Instance.new("TextButton")
ElectricClaw.Parent = SwitchFightingStyle
ElectricClaw.BackgroundColor3 = Color3.new(0, 0, 0)
ElectricClaw.BackgroundTransparency = 0.5
ElectricClaw.Size = UDim2.new(0.8, 0, 0.05, 0)
ElectricClaw.TextScaled = true
ElectricClaw.Position = UDim2.new(0.1, 0, 0.085, 0)
ElectricClaw.TextColor3 = Color3.new(1, 1, 1)
ElectricClaw.Font = Enum.Font.PatrickHand
ElectricClaw.Text = "Lấy võ: Tay Điện v1"

ElectricClaw.MouseButton1Click:Connect(function()
    local args = {
    [1] = "BuyElectro"
}

game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
end)

local FishKungFu = Instance.new("TextButton")
FishKungFu.Parent = SwitchFightingStyle
FishKungFu.BackgroundColor3 = Color3.new(0, 0, 0)
FishKungFu.BackgroundTransparency = 0.5
FishKungFu.Size = UDim2.new(0.8, 0, 0.05, 0)
FishKungFu.TextScaled = true
FishKungFu.Position = UDim2.new(0.1, 0, 0.165, 0)
FishKungFu.TextColor3 = Color3.new(1, 1, 1)
FishKungFu.Font = Enum.Font.PatrickHand
FishKungFu.Text = "Lấy võ: Karate Cá v1"

FishKungFu.MouseButton1Click:Connect(function()
    local args = {
    [1] = "BuyFishmanKarate"
}

game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
end)

local DragonBreath = Instance.new("TextButton")
DragonBreath.Parent = SwitchFightingStyle
DragonBreath.BackgroundColor3 = Color3.new(0, 0, 0)
DragonBreath.BackgroundTransparency = 0.5
DragonBreath.Size = UDim2.new(0.8, 0, 0.05, 0)
DragonBreath.TextScaled = true
DragonBreath.Position = UDim2.new(0.1, 0, 0.245, 0)
DragonBreath.TextColor3 = Color3.new(1, 1, 1)
DragonBreath.Font = Enum.Font.PatrickHand
DragonBreath.Text = "Lấy võ: Hơi thở của lửa v1"

DragonBreath.MouseButton1Click:Connect(function()
    local args = {
    [1] = "BlackbeardReward",
    [2] = "DragonClaw",
    [3] = "2"
}

game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
end)

local SuperHuman = Instance.new("TextButton")
SuperHuman.Parent = SwitchFightingStyle
SuperHuman.BackgroundColor3 = Color3.new(0, 0, 0)
SuperHuman.BackgroundTransparency = 0.5
SuperHuman.Size = UDim2.new(0.8, 0, 0.05, 0)
SuperHuman.TextScaled = true
SuperHuman.Position = UDim2.new(0.1, 0, 0.325, 0)
SuperHuman.TextColor3 = Color3.new(1, 1, 1)
SuperHuman.Font = Enum.Font.PatrickHand
SuperHuman.Text = "Lấy võ: Siêu nhân v1"

SuperHuman.MouseButton1Click:Connect(function()
    warn("Empty for now")
end)

local DarkStep = Instance.new("TextButton")
DarkStep.Parent = SwitchFightingStyle
DarkStep.BackgroundColor3 = Color3.new(0, 0, 0)
DarkStep.BackgroundTransparency = 0.5
DarkStep.Size = UDim2.new(0.8, 0, 0.05, 0)
DarkStep.TextScaled = true
DarkStep.Position = UDim2.new(0.1, 0, 0.405, 0)
DarkStep.TextColor3 = Color3.new(1, 1, 1)
DarkStep.Font = Enum.Font.PatrickHand
DarkStep.Text = "Lấy võ: Bước chân tử thần v2"

DarkStep.MouseButton1Click:Connect(function()
    warn("Empty for now")
end)

local ElectricPaw = Instance.new("TextButton")
ElectricPaw.Parent = SwitchFightingStyle
ElectricPaw.BackgroundColor3 = Color3.new(0, 0, 0)
ElectricPaw.BackgroundTransparency = 0.5
ElectricPaw.Size = UDim2.new(0.8, 0, 0.05, 0)
ElectricPaw.TextScaled = true
ElectricPaw.Position = UDim2.new(0.1, 0, 0.485, 0)
ElectricPaw.TextColor3 = Color3.new(1, 1, 1)
ElectricPaw.Font = Enum.Font.PatrickHand
ElectricPaw.Text = "Lấy võ: Móng vuốt điện v2"

ElectricPaw.MouseButton1Click:Connect(function()
    warn("Empty for now")
end)

local SharkmanKarate = Instance.new("TextButton")
SharkmanKarate.Parent = SwitchFightingStyle
SharkmanKarate.BackgroundColor3 = Color3.new(0, 0, 0)
SharkmanKarate.BackgroundTransparency = 0.5
SharkmanKarate.Size = UDim2.new(0.8, 0, 0.05, 0)
SharkmanKarate.TextScaled = true
SharkmanKarate.Position = UDim2.new(0.1, 0, 0.565, 0)
SharkmanKarate.TextColor3 = Color3.new(1, 1, 1)
SharkmanKarate.Font = Enum.Font.PatrickHand
SharkmanKarate.Text = "Lấy võ: Karate Cá mập v2"

SharkmanKarate.MouseButton1Click:Connect(function()
    warn("Empty for now")
end)

local InfernoDragonBreath = Instance.new("TextButton")
InfernoDragonBreath.Parent = SwitchFightingStyle
InfernoDragonBreath.BackgroundColor3 = Color3.new(0, 0, 0)
InfernoDragonBreath.BackgroundTransparency = 0.5
InfernoDragonBreath.Size = UDim2.new(0.8, 0, 0.05, 0)
InfernoDragonBreath.TextScaled = true
InfernoDragonBreath.Position = UDim2.new(0.1, 0, 0.645, 0)
InfernoDragonBreath.TextColor3 = Color3.new(1, 1, 1)
InfernoDragonBreath.Font = Enum.Font.PatrickHand
InfernoDragonBreath.Text = "Lấy võ: Hơi thở của Rồng Nova v2"

InfernoDragonBreath.MouseButton1Click:Connect(function()
    warn("Empty for now")
end)

local GodHuman = Instance.new("TextButton")
GodHuman.Parent = SwitchFightingStyle
GodHuman.BackgroundColor3 = Color3.new(0, 0, 0)
GodHuman.BackgroundTransparency = 0.5
GodHuman.Size = UDim2.new(0.8, 0, 0.05, 0)
GodHuman.TextScaled = true
GodHuman.Position = UDim2.new(0.1, 0, 0.725, 0)
GodHuman.TextColor3 = Color3.new(1, 1, 1)
GodHuman.Font = Enum.Font.PatrickHand
GodHuman.Text = "Lấy võ: Nhân thần v2"

GodHuman.MouseButton1Click:Connect(function()
    warn("Empty for now")
end)

-- Boat Settings --

local SpawnPart = Instance.new("TextButton")
SpawnPart.Parent = BoatSelection
SpawnPart.BackgroundColor3 = Color3.new(0, 0, 0)
SpawnPart.BackgroundTransparency = 0.5
SpawnPart.Size = UDim2.new(0.8, 0, 0.05, 0)
SpawnPart.TextScaled = true
SpawnPart.Position = UDim2.new(0.1, 0, 0.005, 0)
SpawnPart.TextColor3 = Color3.new(1, 1, 1)
SpawnPart.Font = Enum.Font.PatrickHand
SpawnPart.Text = "Đặt thứ này ở chỗ mua thuyền"

SpawnPart.MouseButton1Click:Connect(function()
    local existingPart = workspace:FindFirstChild("Check")
    if existingPart then
        existingPart:Destroy() -- Remove previous part if it exists
    end
    
    local part = Instance.new("Part")
    part.Name = "Check" -- Name the part "Check"
    part.Size = Vector3.new(2, 1, 2)
    part.Position = game.Players.LocalPlayer.Character.HumanoidRootPart.Position + Vector3.new(0, 5, 0) -- Spawn above player
    part.Anchored = true
    part.Parent = workspace
end)

local BuyBoat = Instance.new("TextButton")
BuyBoat.Parent = BoatSelection
BuyBoat.BackgroundColor3 = Color3.new(0, 0, 0)
BuyBoat.BackgroundTransparency = 0.5
BuyBoat.Size = UDim2.new(0.8, 0, 0.05, 0)
BuyBoat.TextScaled = true
BuyBoat.Position = UDim2.new(0.1, 0, 0.165, 0)
BuyBoat.TextColor3 = Color3.new(1, 1, 1)
BuyBoat.Font = Enum.Font.PatrickHand
BuyBoat.Text = "Mua thuyền đã chọn"

BuyBoat.MouseButton1Click:Connect(function()
    local part = workspace:FindFirstChild("Check")
    if part then
        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = part.CFrame + Vector3.new(0, 3, 0) -- Teleport above the part
    end
    
    wait(0.02)
    
    local boattext = HoldBoatName.Text
    
    local args = {
    [1] = "BuyBoat",
    [2] = boattext
}

game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
end)

local BringBoat = Instance.new("TextButton")
BringBoat.Parent = BoatSelection
BringBoat.BackgroundColor3 = Color3.new(0, 0, 0)
BringBoat.BackgroundTransparency = 0.5
BringBoat.Size = UDim2.new(0.8, 0, 0.05, 0)
BringBoat.TextScaled = true
BringBoat.Position = UDim2.new(0.1, 0, 0.085, 0)
BringBoat.TextColor3 = Color3.new(1, 1, 1)
BringBoat.Font = Enum.Font.PatrickHand
BringBoat.Text = "Triệu hồi thuyền"

BringBoat.MouseButton1Click:Connect(function()
    local getboat = HoldBoatName.Text
        
        local vehicle = game.Workspace.Boats:FindFirstChild(getboat)
        if vehicle and vehicle:IsA("Model") then
            local vehicleSeat = vehicle:FindFirstChild("VehicleSeat")
            if vehicleSeat then
                vehicleSeat.CFrame = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame
            else
                warn("No VehicleSeat found in " .. getboat)
            end
        else
            warn("Không có thuyền named " .. getboat .. " found.")
        end
end)

local Dinghy = Instance.new("TextButton")
Dinghy.Parent = BoatSelection
Dinghy.BackgroundColor3 = Color3.new(0, 0, 0)
Dinghy.BackgroundTransparency = 0.5
Dinghy.Size = UDim2.new(0.8, 0, 0.05, 0)
Dinghy.TextScaled = true
Dinghy.Position = UDim2.new(0.1, 0, 0.245, 0)
Dinghy.TextColor3 = Color3.new(1, 1, 1)
Dinghy.Font = Enum.Font.PatrickHand
Dinghy.Text = "Thuyền nhỏ"

local isSelected = false
Dinghy.MouseButton1Click:Connect(function()
    if isSelected then
        Dinghy.TextColor3 = Color3.new(1, 1, 1)
        HoldBoatName.Text = "Không có thuyền"
    else
        Dinghy.TextColor3 = Color3.new(0, 1, 0)
        HoldBoatName.Text = "Dinghy"
    end
    isSelected = not isSelected
end)

local PirateSloop = Instance.new("TextButton")
PirateSloop.Parent = BoatSelection
PirateSloop.BackgroundColor3 = Color3.new(0, 0, 0)
PirateSloop.BackgroundTransparency = 0.5
PirateSloop.Size = UDim2.new(0.8, 0, 0.05, 0)
PirateSloop.TextScaled = true
PirateSloop.Position = UDim2.new(0.1, 0, 0.325, 0)
PirateSloop.TextColor3 = Color3.new(1, 0, 0)
PirateSloop.Font = Enum.Font.PatrickHand
PirateSloop.Text = "Thuyền cướp biển"

local isSelected = false
PirateSloop.MouseButton1Click:Connect(function()
    if isSelected then
        PirateSloop.TextColor3 = Color3.new(1, 1, 1)
        HoldBoatName.Text = "Không có thuyền"
    else
        PirateSloop.TextColor3 = Color3.new(0, 1, 0)
        HoldBoatName.Text = "PirateSloop"
    end
    isSelected = not isSelected
end)

local PirateBrigade = Instance.new("TextButton")
PirateBrigade.Parent = BoatSelection
PirateBrigade.BackgroundColor3 = Color3.new(0, 0, 0)
PirateBrigade.BackgroundTransparency = 0.5
PirateBrigade.Size = UDim2.new(0.8, 0, 0.05, 0)
PirateBrigade.TextScaled = true
PirateBrigade.Position = UDim2.new(0.1, 0, 0.405, 0)
PirateBrigade.TextColor3 = Color3.new(1, 0, 0)
PirateBrigade.Font = Enum.Font.PatrickHand
PirateBrigade.Text = "Lữ đoàn cướp biển"

local isSelected = false
PirateBrigade.MouseButton1Click:Connect(function()
    if isSelected then
        PirateBrigade.TextColor3 = Color3.new(1, 1, 1)
        HoldBoatName.Text = "Không có thuyền"
    else
        PirateBrigade.TextColor3 = Color3.new(0, 1, 0)
        HoldBoatName.Text = "PirateBrigade"
    end
    isSelected = not isSelected
end)

local PirateGrandBrigade = Instance.new("TextButton")
PirateGrandBrigade.Parent = BoatSelection
PirateGrandBrigade.BackgroundColor3 = Color3.new(0, 0, 0)
PirateGrandBrigade.BackgroundTransparency = 0.5
PirateGrandBrigade.Size = UDim2.new(0.8, 0, 0.05, 0)
PirateGrandBrigade.TextScaled = true
PirateGrandBrigade.Position = UDim2.new(0.1, 0, 0.485, 0)
PirateGrandBrigade.TextColor3 = Color3.new(1, 0, 0)
PirateGrandBrigade.Font = Enum.Font.PatrickHand
PirateGrandBrigade.Text = "Lữ đoàn cướp biển lớn"

local isSelected = false
PirateGrandBrigade.MouseButton1Click:Connect(function()
    if isSelected then
        PirateGrandBrigade.TextColor3 = Color3.new(1, 1, 1)
        HoldBoatName.Text = "Không có thuyền"
    else
        PirateGrandBrigade.TextColor3 = Color3.new(0, 1, 0)
        HoldBoatName.Text = "PirateGrandBrigade"
    end
    isSelected = not isSelected
end)

local MarineSloop = Instance.new("TextButton")
MarineSloop.Parent = BoatSelection
MarineSloop.BackgroundColor3 = Color3.new(0, 0, 0)
MarineSloop.BackgroundTransparency = 0.5
MarineSloop.Size = UDim2.new(0.8, 0, 0.05, 0)
MarineSloop.TextScaled = true
MarineSloop.Position = UDim2.new(0.1, 0, 0.565, 0)
MarineSloop.TextColor3 = Color3.new(0, 1, 1)
MarineSloop.Font = Enum.Font.PatrickHand
MarineSloop.Text = "Tàu biển"

local isSelected = false
MarineSloop.MouseButton1Click:Connect(function()
    if isSelected then
        MarineSloop.TextColor3 = Color3.new(1, 1, 1)
        HoldBoatName.Text = "Không có thuyền"
    else
        MarineSloop.TextColor3 = Color3.new(0, 1, 0)
        HoldBoatName.Text = "MarineSloop"
    end
    isSelected = not isSelected
end)

local MarineBrigade = Instance.new("TextButton")
MarineBrigade.Parent = BoatSelection
MarineBrigade.BackgroundColor3 = Color3.new(0, 0, 0)
MarineBrigade.BackgroundTransparency = 0.5
MarineBrigade.Size = UDim2.new(0.8, 0, 0.05, 0)
MarineBrigade.TextScaled = true
MarineBrigade.Position = UDim2.new(0.1, 0, 0.645, 0)
MarineBrigade.TextColor3 = Color3.new(0, 1, 1)
MarineBrigade.Font = Enum.Font.PatrickHand
MarineBrigade.Text = "Lữ đoàn thủy quân lục chiến"

local isSelected = false
MarineBrigade.MouseButton1Click:Connect(function()
    if isSelected then
        MarineBrigade.TextColor3 = Color3.new(1, 1, 1)
        HoldBoatName.Text = "Không có thuyền"
    else
        MarineBrigade.TextColor3 = Color3.new(0, 1, 0)
        HoldBoatName.Text = "MarineBrigade"
    end
    isSelected = not isSelected
end)

local MarineGrandBrigade = Instance.new("TextButton")
MarineGrandBrigade.Parent = BoatSelection
MarineGrandBrigade.BackgroundColor3 = Color3.new(0, 0, 0)
MarineGrandBrigade.BackgroundTransparency = 0.5
MarineGrandBrigade.Size = UDim2.new(0.8, 0, 0.05, 0)
MarineGrandBrigade.TextScaled = true
MarineGrandBrigade.Position = UDim2.new(0.1, 0, 0.725, 0)
MarineGrandBrigade.TextColor3 = Color3.new(0, 1, 1)
MarineGrandBrigade.Font = Enum.Font.PatrickHand
MarineGrandBrigade.Text = "Lữ đoàn thủy quân lục chiến lớn"

local isSelected = false
MarineGrandBrigade.MouseButton1Click:Connect(function()
    if isSelected then
        MarineGrandBrigade.TextColor3 = Color3.new(1, 1, 1)
        HoldBoatName.Text = "Không có thuyền"
    else
        MarineGrandBrigade.TextColor3 = Color3.new(0, 1, 0)
        HoldBoatName.Text = "MarineGrandBrigade"
    end
    isSelected = not isSelected
end)

local Lantern = Instance.new("TextButton")
Lantern.Parent = BoatSelection
Lantern.BackgroundColor3 = Color3.new(0, 0, 0)
Lantern.BackgroundTransparency = 0.5
Lantern.Size = UDim2.new(0.8, 0, 0.05, 0)
Lantern.TextScaled = true
Lantern.Position = UDim2.new(0.1, 0, 0.805, 0)
Lantern.TextColor3 = Color3.new(1, 1, 0)
Lantern.Font = Enum.Font.PatrickHand
Lantern.Text = "đèn lồng"

local isSelected = false
Lantern.MouseButton1Click:Connect(function()
    if isSelected then
        Lantern.TextColor3 = Color3.new(1, 1, 1)
        HoldBoatName.Text = "Không có thuyền"
    else
        Lantern.TextColor3 = Color3.new(0, 1, 0)
        HoldBoatName.Text = "Lantern"
    end
    isSelected = not isSelected
end)

local Guardian = Instance.new("TextButton")
Guardian.Parent = BoatSelection
Guardian.BackgroundColor3 = Color3.new(0, 0, 0)
Guardian.BackgroundTransparency = 0.5
Guardian.Size = UDim2.new(0.8, 0, 0.05, 0)
Guardian.TextScaled = true
Guardian.Position = UDim2.new(0.1, 0, 0.885, 0)
Guardian.TextColor3 = Color3.new(0, 0, 1)
Guardian.Font = Enum.Font.PatrickHand
Guardian.Text = "Người giám hộ"

local isSelected = false
Guardian.MouseButton1Click:Connect(function()
    if isSelected then
        Guardian.TextColor3 = Color3.new(1, 1, 1)
        HoldBoatName.Text = "Không có thuyền"
    else
        Guardian.TextColor3 = Color3.new(0, 1, 0)
        HoldBoatName.Text = "Guardian"
    end
    isSelected = not isSelected
end)

-- BOSS SEA123 --

local EntFrame = Instance.new("Frame")
EntFrame.Parent = ScreenGui
EntFrame.BackgroundColor3 = Color3.new(0, 0, 0)
EntFrame.BackgroundTransparency = 0.5
EntFrame.Size = UDim2.new(0.4, 0, 0.6, 0)
EntFrame.Position = UDim2.new(0.05, 0, 0.1, 0)
EntFrame.Active = true
EntFrame.Draggable = true
EntFrame.Visible = false

local EntFrameUICorner = Instance.new("UICorner")
EntFrameUICorner.Parent = EntFrame
EntFrameUICorner.CornerRadius = UDim.new(0.1, 0)

local EntitySF = Instance.new("ScrollingFrame")
EntitySF.Parent = EntFrame
EntitySF.BackgroundColor3 = Color3.new(0, 0, 0)
EntitySF.BackgroundTransparency = 0.5
EntitySF.Size = UDim2.new(0.9, 0, 0.8, 0)
EntitySF.Position = UDim2.new(0.05, 0, 0.1, 0)
EntitySF.ScrollBarThickness = 0.1
EntitySF.CanvasSize = UDim2.new(0, 0, 2, 0)

-- Entity Button Holder --

local EntityNumber0 = Instance.new("TextButton")
EntityNumber0.Parent = EntitySF
EntityNumber0.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
EntityNumber0.BackgroundTransparency = 0
EntityNumber0.Size = UDim2.new(0.9, 0, 0.05, 0)
EntityNumber0.Position = UDim2.new(0.05, 0, 0.02, 0)
EntityNumber0.TextScaled = true
EntityNumber0.TextColor3 = Color3.new(0, 0, 0)
EntityNumber0.Font = Enum.Font.PatrickHand
EntityNumber0.Text = "Đi tới Trùm Vua Khỉ Đột [Lvl.20]"

local EntNum0UI = Instance.new("UICorner")
EntNum0UI.Parent = EntityNumber0
EntNum0UI.CornerRadius = UDim.new(0.1, 0)

-- 1 --

-- Entity Button Action --

-- Part touched to get quest --
local Lvl20Boss_Dialog = Instance.new("Part")
Lvl20Boss_Dialog.Parent = game.Workspace
Lvl20Boss_Dialog.Name = "QuestCube_Lvl20"
Lvl20Boss_Dialog.Size = Vector3.new(1, 1, 1)
Lvl20Boss_Dialog.Color = Color3.fromRGB(255, 0, 255)
Lvl20Boss_Dialog.Transparency = 0.9
Lvl20Boss_Dialog.Anchored = true
Lvl20Boss_Dialog.CanCollide = false
Lvl20Boss_Dialog.Position = Vector3.new(-1122, 40, -505)

-- Part function ontouched to get quest --
local function Mission_0()
    print("[You Picked Quest: Lvl.20 Boss]")
    wait(0.02)
    local args = {
    [1] = "StartQuest",
    [2] = "JungleQuest",
    [3] = 3
}

game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
wait(0.02)
end

-- Activated when part being touched by me --
Lvl20Boss_Dialog.Touched:Connect(Mission_0)

-- Box Closed Here --

-- Entity Button Connect To --

EntityNumber0.MouseButton1Click:Connect(function()
    local EntPosition_Lvl20Boss = game:GetService("Workspace").QuestCube_Lvl20
    if EntPosition_Lvl20Boss then
        local playerPos = game.Players.LocalPlayer.Character.HumanoidRootPart.Position
        if isTweenMode then
            if currentTween then
                currentTween:Cancel()
            end
            local goal = {CFrame = EntPosition_Lvl20Boss.CFrame + Vector3.new(0, 2, 0)}
            local tweenInfo = createTweenInfo(playerPos, goal.CFrame.Position)
            currentTween = tweenService:Create(game.Players.LocalPlayer.Character.HumanoidRootPart, tweenInfo, goal)
            currentTween:Play()
            
            currentTween.Completed:Connect(function()
                EnemiesCFrameTo.TextColor3 = Color3.fromRGB(255, 255, 0)
                EnemiesCF = true
            end)
        else
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = EntPosition_Lvl20Boss.CFrame + Vector3.new(0, 0, 0)
            wait(0.01)
            game.Players.LocalPlayer.Character.Humanoid.Health = 0
        end
    else
        print("Part not found: Can't taking quest !")
    end
end)

-- Closed Box --

-- Hide Frame Button --

local EnemyHRPSelection = Instance.new("TextButton")
EnemyHRPSelection.Parent = ScrollingFrame
EnemyHRPSelection.Size = UDim2.new(0.03, 0, 0.9, 0)
EnemyHRPSelection.Position = UDim2.new(0.805, 0, 0, 0)
EnemyHRPSelection.BackgroundColor3 = Color3.new(0, 0, 0)
EnemyHRPSelection.BackgroundTransparency = 0.5
EnemyHRPSelection.TextScaled = true
EnemyHRPSelection.Font = Enum.Font.PatrickHand
EnemyHRPSelection.Text = "Chọn Quái GUI: Tắt"
EnemyHRPSelection.TextColor3 = Color3.new(1, 1, 1)

local IsEnemyHRPS = false
EnemyHRPSelection.MouseButton1Click:Connect(function()
    if IsEnemyHRPS then
        EnemyHRPSelection.Text = "Chọn Quái GUI: Tắt"
        EnemyHRPSelection.TextColor3 = Color3.new(1, 1, 1)
        
        IsEnemyHRPS = false
        
        EntFrame.Visible = false
    else
        EnemyHRPSelection.Text = "Chọn Quái GUI: Bật"
        EnemyHRPSelection.TextColor3 = Color3.new(0, 1, 0)
        
        IsEnemyHRPS = true
        
        EntFrame.Visible = true
    end
end)

-- Button Started From Here --
local Itsme = game.Players
local ImHere = Itsme.LocalPlayer
local BHRP

-- Action --

local function getHumanoidRootPart()
    local character = ImHere.Character
    if character then
        return character:FindFirstChild("HumanoidRootPart")
    end
    return nil
end

local function USEBV()
    local PLHRP = getHumanoidRootPart()
    if PLHRP then
        BHRP = Instance.new("BodyVelocity")
        BHRP.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
        BHRP.Velocity = Vector3.new(0, 0, 0)
        BHRP.Parent = PLHRP
    end
end

local function REBV()
    if BHRP then
        BHRP:Destroy()
        BHRP = nil
    end
end

-- Quickly Changed Zero Gravity --

local ZeroGravity = Instance.new("TextButton")
ZeroGravity.Parent = ScreenGui
ZeroGravity.BackgroundColor3 = Color3.new(0, 0, 0)
ZeroGravity.BackgroundTransparency = 0.5
ZeroGravity.Size = UDim2.new(0.05, 0, 0.1, 0)
ZeroGravity.TextScaled = true
ZeroGravity.Position = UDim2.new(0.4, 0, 0.68, 0)
ZeroGravity.TextColor3 = Color3.new(1, 1, 1)
ZeroGravity.Font = Enum.Font.Code
ZeroGravity.Text = "Bay Mượt[Tắt]"
ZeroGravity.Visible = false

local ZeroGravityUICorner = Instance.new("UICorner")
ZeroGravityUICorner.Parent = ZeroGravity
ZeroGravityUICorner.CornerRadius = UDim.new(0.1, 0)

local AntiGravity = false
ZeroGravity.MouseButton1Click:Connect(function()
    if AntiGravity then
        ZeroGravity.Text = "Bay Mượt[Tắt]"
        ZeroGravity.TextColor3 = Color3.new(1, 1, 1)
        REBV()
        AntiGravity = false
    else
        ZeroGravity.Text = "Bay Mượt[Bật]"
        ZeroGravity.TextColor3 = Color3.new(0, 1, 1)
        USEBV()
        AntiGravity = true
    end
end)

-- True Zero Gravity Button Toggler --

local TrueZeroGravity = Instance.new("TextButton")
TrueZeroGravity.Parent = ScrollingFrame
TrueZeroGravity.Size = UDim2.new(0.03, 0, 0.9, 0)
TrueZeroGravity.Position = UDim2.new(0.845, 0, 0, 0)
TrueZeroGravity.BackgroundColor3 = Color3.new(0, 0, 0)
TrueZeroGravity.BackgroundTransparency = 0.5
TrueZeroGravity.TextScaled = true
TrueZeroGravity.Font = Enum.Font.PatrickHand
TrueZeroGravity.Text = "Không trọng lực [Giấu]"
TrueZeroGravity.TextColor3 = Color3.new(1, 1, 1)

local AntiZGravity = false
TrueZeroGravity.MouseButton1Click:Connect(function()
    if AntiZGravity then
        TrueZeroGravity.Text = "Không trọng lực [Giấu]"
        TrueZeroGravity.TextColor3 = Color3.new(1, 1, 1)
        
        AntiZGravity = false
        
        ZeroGravity.Visible = false
    else
        TrueZeroGravity.Text = "Không trọng lực [Khoe ra]"
        TrueZeroGravity.TextColor3 = Color3.new(0, 1, 0)
        
        AntiZGravity = true
        
        ZeroGravity.Visible = true
    end
end)

-- When Character Reset --
ImHere.CharacterAdded:Connect(function()
    ZeroGravity.Text = "Bay Mượt[Tắt]"
    ZeroGravity.TextColor3 = Color3.new(1, 1, 1)
    AntiGravity = false
    REBV()
end)
-- When Character Reset --

-- Fruit/Chest Detector --

local CounterofChest1 = Instance.new("TextLabel")
CounterofChest1.Parent = ScreenGui
CounterofChest1.BackgroundColor3 = Color3.new(0, 0, 0)
CounterofChest1.BackgroundTransparency = 0.8
CounterofChest1.Size = UDim2.new(0.2, 0, 0.05, 0)
CounterofChest1.Position = UDim2.new(0.21, 0, 0.01, 0)
CounterofChest1.TextScaled = true
CounterofChest1.Font = Enum.Font.Code
CounterofChest1.TextColor3 = Color3.new(1, 1, 1)
CounterofChest1.Text = ""
CounterofChest1.Visible = false

local CounterofChest2 = Instance.new("TextLabel")
CounterofChest2.Parent = ScreenGui
CounterofChest2.BackgroundColor3 = Color3.new(0, 0, 0)
CounterofChest2.BackgroundTransparency = 0.8
CounterofChest2.Size = UDim2.new(0.2, 0, 0.05, 0)
CounterofChest2.Position = UDim2.new(0, 0, 0.07, 0)
CounterofChest2.TextScaled = true
CounterofChest2.Font = Enum.Font.Code
CounterofChest2.TextColor3 = Color3.new(1, 1, 1)
CounterofChest2.Text = ""
CounterofChest2.Visible = false

local CounterofChest3 = Instance.new("TextLabel")
CounterofChest3.Parent = ScreenGui
CounterofChest3.BackgroundColor3 = Color3.new(0, 0, 0)
CounterofChest3.BackgroundTransparency = 0.8
CounterofChest3.Size = UDim2.new(0.2, 0, 0.05, 0)
CounterofChest3.Position = UDim2.new(0.21, 0, 0.07, 0)
CounterofChest3.TextScaled = true
CounterofChest3.Font = Enum.Font.Code
CounterofChest3.TextColor3 = Color3.new(1, 1, 1)
CounterofChest3.Text = ""
CounterofChest3.Visible = false

local CounterofFruitSpawn = Instance.new("TextLabel")
CounterofFruitSpawn.Parent = ScreenGui
CounterofFruitSpawn.BackgroundColor3 = Color3.new(0, 0, 0)
CounterofFruitSpawn.BackgroundTransparency = 0.8
CounterofFruitSpawn.Size = UDim2.new(0.2, 0, 0.05, 0)
CounterofFruitSpawn.Position = UDim2.new(0, 0, 0.01, 0)
CounterofFruitSpawn.TextScaled = true
CounterofFruitSpawn.Font = Enum.Font.Code
CounterofFruitSpawn.TextColor3 = Color3.new(1, 1, 1)
CounterofFruitSpawn.Text = ""
CounterofFruitSpawn.Visible = false

local function countParts(partName)
    local count = 0
    for _, obj in pairs(game:GetService("Workspace"):GetChildren()) do
        if obj.Name == partName and obj:IsA("BasePart") then
            count = count + 1
        end
    end
    return count
end

local function countItems(itemName)
    local itemCount = 0
    local item = game:GetService("Workspace"):FindFirstChild(itemName)
    if item and item:IsA("Model") and item:FindFirstChild("Handle") then
        itemCount = itemCount + 1
    end
    return itemCount
end

local function updateLabels()
    CounterofChest1.Text = "Rương Bạc Có: " .. countParts("Chest1")
    CounterofChest2.Text = "Rương Vàng Có: " .. countParts("Chest2")
    CounterofChest3.Text = "Rương Kim Cương Có: " .. countParts("Chest3")
    CounterofFruitSpawn.Text = "Trái Ác Quỷ Xuất Hiện Có: " .. countItems("Fruit ")
end

local TrueFruitDetector = Instance.new("TextButton")
TrueFruitDetector.Parent = ScrollingFrame
TrueFruitDetector.Size = UDim2.new(0.03, 0, 0.9, 0)
TrueFruitDetector.Position = UDim2.new(0.885, 0, 0, 0)
TrueFruitDetector.BackgroundColor3 = Color3.new(0, 0, 0)
TrueFruitDetector.BackgroundTransparency = 0.5
TrueFruitDetector.TextScaled = true
TrueFruitDetector.Font = Enum.Font.PatrickHand
TrueFruitDetector.Text = "Xem Rương và Trái Ác Quỷ [Giấu]"
TrueFruitDetector.TextColor3 = Color3.new(1, 1, 1)

local FruitChestTrueSpawned = false
TrueFruitDetector.MouseButton1Click:Connect(function()
    if FruitChestTrueSpawned then
        TrueFruitDetector.Text = "Xem Rương và Trái Ác Quỷ [Giấu]"
        TrueFruitDetector.TextColor3 = Color3.new(1, 1, 1)
        CounterofChest1.Visible = false
        CounterofChest2.Visible = false
        CounterofChest3.Visible = false
        CounterofFruitSpawn.Visible = false
        
        FruitChestTrueSpawned = false
    else
        TrueFruitDetector.Text = "Xem Rương và Trái Ác Quỷ [Khoe ra]"
        TrueFruitDetector.TextColor3 = Color3.new(0, 1, 0)
        CounterofChest1.Visible = true
        CounterofChest2.Visible = true
        CounterofChest3.Visible = true
        CounterofFruitSpawn.Visible = true
        
        FruitChestTrueSpawned = true
        
        while FruitChestTrueSpawned do
            updateLabels()
            wait(1)
        end
    end
end)

-- OVERKILL/Lappy Just a Music I Liked In --

local TrueQuestTaking = Instance.new("TextButton")
TrueQuestTaking.Parent = ScrollingFrame
TrueQuestTaking.Size = UDim2.new(0.03, 0, 0.9, 0)
TrueQuestTaking.Position = UDim2.new(0.925, 0, 0, 0)
TrueQuestTaking.BackgroundColor3 = Color3.new(0, 0, 0)
TrueQuestTaking.BackgroundTransparency = 0.5
TrueQuestTaking.TextScaled = true
TrueQuestTaking.Font = Enum.Font.Code
TrueQuestTaking.Text = "Khởi động[Tự động Nhiệm Vụ]"
TrueQuestTaking.TextColor3 = Color3.new(1, 1, 0)
TrueQuestTaking.Visible = true

TrueQuestTaking.MouseButton1Click:Connect(function()
    print("-- Auto Taking Quest: Loaded In --")
    loadstring(game:HttpGet("https://raw.githubusercontent.com/NganHa2k3/Tensura/refs/heads/main/BloxFruits_AutoQuest_I"))()
    task.wait(0.02)
    TrueQuestTaking.Visible = false
end)

-- Helper Box --

local msgframe_0 = {
    "----- Cách sử dụng nút này -----",
    "Bay mượt: là nút giúp cho chuyển động",
    "của bạn trở nên mượt mà hơn trong quá trình",
    "bay (Tweening Progress), khi bạn ấn nó sẽ tạo",
    "ra một cái nút hình vuông nhỏ trên thanh công cụ",
    "của bạn ấn vào đó nó sẽ bật.. và bạn cũng có thể tắt",
    "hoặc khi bạn chết nghĩa là nhân vật máu về 0, hoặc reset",
    "character khi hồi sinh nó sẽ tự động tắt, để làm gì hả",
    "để tránh trường hợp có thể gặp lỗi trong script chưa sửa được. ok tạm biệt !"
}

local msglistfix_0 = table.concat(msgframe_0, "\n")

local TutorialFrame_0 = Instance.new("TextLabel")
TutorialFrame_0.Parent = ScreenGui
TutorialFrame_0.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
TutorialFrame_0.BackgroundTransparency = 0.8
TutorialFrame_0.Size = UDim2.new(0.5, 0, 0.5, 0)
TutorialFrame_0.Position = UDim2.new(0.25, 0, 0.25, 0)
TutorialFrame_0.TextWrapped = true
TutorialFrame_0.TextScaled = true
TutorialFrame_0.TextColor3 = Color3.fromRGB(255, 0, 255)
TutorialFrame_0.Font = Enum.Font.PatrickHand
TutorialFrame_0.Text = msglistfix_0
TutorialFrame_0.Visible = false

-- Button Animation --

OpenClose.MouseEnter:Connect(function()
    OpenClose.TextColor3 = Color3.new(1, 1, 0)
end)

OpenClose.MouseLeave:Connect(function()
    OpenClose.TextColor3 = Color3.new(1, 1, 1)
end)

TrueZeroGravity.MouseEnter:Connect(function()
    TutorialFrame_0.Visible = true
end)

TrueZeroGravity.MouseLeave:Connect(function()
    TutorialFrame_0.Visible = false
end)

-- [[ Level Check Displayed ]] --

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local LevelCheckF = Instance.new("TextButton", SG)
LevelCheckF.Parent = ScrollingFrame
LevelCheckF.BackgroundColor3 = Color3.new(0, 0, 0)
LevelCheckF.BackgroundTransparency = 0.5
LevelCheckF.Size = UDim2.new(0.03, 0, 0.9, 0)
LevelCheckF.Position = UDim2.new(0.965, 0, 0, 0)
LevelCheckF.TextScaled = true
LevelCheckF.TextColor3 = Color3.new(1, 1, 1)
LevelCheckF.Font = Enum.Font.PatrickHand
LevelCheckF.Text = "Kiểm tra đồ: [Tắt]"

local isToggledOn = false
local billboardGuis = {}

local function createBillboardGui(player)
    if not player.Character or not player.Character:FindFirstChild("HumanoidRootPart") then return end
    
    local head = player.Character:WaitForChild("Head")
    local distance = (player.Character.HumanoidRootPart.Position - LocalPlayer.Character.HumanoidRootPart.Position).magnitude
    local level = player:FindFirstChild("Data") and player.Data:FindFirstChild("Level") and player.Data.Level.Value or "N/A"
    local beli = player:FindFirstChild("Data") and player.Data:FindFirstChild("Beli") and player.Data.Beli.Value or "N/A"
    local devilf = player:FindFirstChild("Data") and player.Data:FindFirstChild("DevilFruit") and player.Data.DevilFruit.Value or "N/A"
    local playersDisplayName = player.DisplayName or "Unknown"
    local username = player.Name

    local billboard = Instance.new("BillboardGui")
    billboard.Size = UDim2.new(0, 200, 0, 120)
    billboard.StudsOffset = Vector3.new(-8, 0, 0)
    billboard.AlwaysOnTop = true
    billboard.Parent = head

    local distanceLabel = Instance.new("TextLabel")
    distanceLabel.Size = UDim2.new(1, 0, 0, 25)
    distanceLabel.BackgroundTransparency = 1
    distanceLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    distanceLabel.TextStrokeTransparency = 0.5
    distanceLabel.Text = "[" .. math.floor(distance) .. "m]"
    distanceLabel.TextScaled = false
    distanceLabel.TextSize = 5
    distanceLabel.Parent = billboard

    local levelLabel = Instance.new("TextLabel")
    levelLabel.Size = UDim2.new(1, 0, 0, 25)
    levelLabel.Position = UDim2.new(0, 0, 0, 9)
    levelLabel.BackgroundTransparency = 1
    levelLabel.TextColor3 = Color3.fromRGB(255, 255, 0)
    levelLabel.TextStrokeTransparency = 0.5
    levelLabel.Text = "[" .. level .. "]"
    levelLabel.TextScaled = false
    levelLabel.TextSize = 5
    levelLabel.Parent = billboard

    local beliLabel = Instance.new("TextLabel")
    beliLabel.Size = UDim2.new(1, 0, 0, 25)
    beliLabel.Position = UDim2.new(0, 0, 0, 18)
    beliLabel.BackgroundTransparency = 1
    beliLabel.TextColor3 = Color3.fromRGB(0, 255, 0)
    beliLabel.TextStrokeTransparency = 0.5
    beliLabel.Text = "[" .. beli .. "]"
    beliLabel.TextScaled = false
    beliLabel.TextSize = 5
    beliLabel.Parent = billboard

    local devilfLabel = Instance.new("TextLabel")
    devilfLabel.Size = UDim2.new(1, 0, 0, 25)
    devilfLabel.Position = UDim2.new(0, 0, 0, 27)
    devilfLabel.BackgroundTransparency = 1
    devilfLabel.TextColor3 = Color3.fromRGB(0, 255, 255)
    devilfLabel.TextStrokeTransparency = 0.5
    devilfLabel.Text = "[" .. devilf .. "]"
    devilfLabel.TextScaled = false
    devilfLabel.TextSize = 5
    devilfLabel.Parent = billboard

    local playersLabel = Instance.new("TextLabel")
    playersLabel.Size = UDim2.new(1, 0, 0, 25)
    playersLabel.Position = UDim2.new(0, 0, 0, 36)
    playersLabel.BackgroundTransparency = 1
    playersLabel.TextColor3 = Color3.fromRGB(255, 165, 0)
    playersLabel.TextStrokeTransparency = 0.5
    playersLabel.Text = "[" .. playersDisplayName .. "]"
    playersLabel.TextScaled = false
    playersLabel.TextSize = 5
    playersLabel.Parent = billboard

    local userLabel = Instance.new("TextLabel")
    userLabel.Size = UDim2.new(1, 0, 0, 25)
    userLabel.Position = UDim2.new(0, 0, 0, 45)
    userLabel.BackgroundTransparency = 1
    userLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    userLabel.TextStrokeTransparency = 0.5
    userLabel.Text = "[" .. username .. "]"
    userLabel.TextScaled = false
    userLabel.TextSize = 5
    userLabel.Parent = billboard

    billboardGuis[player.UserId] = {billboard, distanceLabel, levelLabel, beliLabel, devilfLabel, playersLabel, userLabel}
end

local function updateBillboardGui(player)
    if billboardGuis[player.UserId] then
        local billboard, distanceLabel, levelLabel, beliLabel, devilfLabel, playersLabel, userLabel = unpack(billboardGuis[player.UserId])
        
        if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local distance = (player.Character.HumanoidRootPart.Position - LocalPlayer.Character.HumanoidRootPart.Position).magnitude
            local level = player:FindFirstChild("Data") and player.Data:FindFirstChild("Level") and player.Data.Level.Value or "N/A"
            local beli = player:FindFirstChild("Data") and player.Data:FindFirstChild("Beli") and player.Data.Beli.Value or "N/A"
            local devilf = player:FindFirstChild("Data") and player.Data:FindFirstChild("DevilFruit") and player.Data.DevilFruit.Value or "N/A"
            local playersDisplayName = player.DisplayName or "Unknown"
            local username = player.Name

            distanceLabel.Text = "[" .. math.floor(distance) .. "m]"
            levelLabel.Text = "[" .. level .. "]"
            beliLabel.Text = "[" .. beli .. "]"
            devilfLabel.Text = "[" .. devilf .. "]"
            playersLabel.Text = "[" .. playersDisplayName .. "]"
            userLabel.Text = "[" .. username .. "]"
        end
    end
end

local function toggleBillboards()
    isToggledOn = not isToggledOn
    LevelCheckF.Text = isToggledOn and "Kiểm tra đồ: [Tắt]" or "Kiểm tra đồ: [Mở]"

    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            if isToggledOn then
                createBillboardGui(player)
            else
                if billboardGuis[player.UserId] then
                    billboardGuis[player.UserId][1]:Destroy()
                    billboardGuis[player.UserId] = nil
                end
            end
        end
    end
end

LevelCheckF.MouseButton1Click:Connect(toggleBillboards)

Players.PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function()
        if isToggledOn then
            createBillboardGui(player)
        end
    end)

    if isToggledOn then
        createBillboardGui(player)
    end
end)

for _, player in ipairs(Players:GetPlayers()) do
    if isToggledOn then
        createBillboardGui(player)
    end
end

task.spawn(function()
    while true do
        wait(0.01)
        for _, player in ipairs(Players:GetPlayers()) do
            if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                updateBillboardGui(player)
            end
        end
    end
end)

-- Welcome message --

local CoreGui = game:GetService("StarterGui")
        CoreGui:SetCore("SendNotification", {
            Title = "Chào mừng đến với kịch bản NganHa2k3",
            Text = "Công cụ nhặt rương, trái ác quỷ, vũ khí cực nhanh !",
            Duration = 2,
        })

-- Quick Tools --

local Players = game:GetService("Players")
local player = Players.LocalPlayer

local function Display_Username_AutoCorrect(input)
    for _, player in ipairs(Players:GetPlayers()) do
        if string.lower(player.Name):sub(1, #input) == string.lower(input) or
           string.lower(player.DisplayName):sub(1, #input) == string.lower(input) then
            return player
        end
    end
    return nil
end

local function onPlayerChatted(message)
    local words = string.split(message, " ")

    if words[1] == "Mua" and words[2] == "đồ" and words[3] then
        local itemName = words[3]
        wait(0.2)
        local args = {
            [1] = "BuyItem",
            [2] = itemName
        }
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))

    elseif words[1] == "Lấy" and words[2] then
        local toolName = words[2]
        wait(0.2)
        local args = {
            [1] = "LoadItem",
            [2] = toolName
        }
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))

    elseif words[1] == "Mua" and words[2] == "trái" and words[3] then
        local fruitName = words[3]
        wait(0.1)
        local args = {
            [1] = "PurchaseRawFruit",
            [2] = fruitName,
            [3] = false
        }
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))

    elseif words[1] == "Chợ" then
        game:GetService("Players").LocalPlayer.PlayerGui.Main.FruitShop.Visible = true
    elseif words[1] == "Thức" and words[2] == "tỉnh" and words[3] == "chiêu" then
        game:GetService("Players").LocalPlayer.PlayerGui.Main.AwakeningToggler.Visible = true
    elseif words[1] == "Đổi" and words[2] == "danh" and words[3] == "hiệu" then
        game:GetService("Players").LocalPlayer.PlayerGui.Main.Titles.Visible = true
    elseif words[1] == "Nhặt" and words[2] == "hết" and words[3] == "rương" then
        loadstring(game:HttpGet("https://raw.githubusercontent.com/NganHa2k3/Tensura/main/ChestCFrame"))()
    elseif words[1] == "Nhặt" and words[2] == "rương" and words[3] == "vip" then
        loadstring(game:HttpGet("https://raw.githubusercontent.com/NganHa2k3/Tensura/main/ChestCFrame_Silver"))()
    elseif words[1] == "tptool" then
        loadstring(game:HttpGet("https://raw.githubusercontent.com/NganHa2k3/Ability/main/TeleportTool"))()
    elseif words[1] == "Xem" and words[2] then
        local selected_player = words[2]
        local targetSelected = Display_Username_AutoCorrect(selected_player)
        
        if targetSelected then
            local targetCharacter = targetSelected.Character
            if targetCharacter and targetCharacter:FindFirstChild("Humanoid") then
                local targetH = targetCharacter:FindFirstChild("Humanoid")
                local Drone_Camera = game:GetService("Workspace").CurrentCamera
                Drone_Camera.CameraSubject = targetH
                local CoreGui = game:GetService("StarterGui")
                CoreGui:SetCore("SendNotification", {
                    Title = "Spectate Mode",
                    Text = "Now Spectating Player: " .. targetSelected.Name,
                    Duration = 2,
                    })
            else
                local CoreGui = game:GetService("StarterGui")
                CoreGui:SetCore("SendNotification", {
                    Title = "Spectate Mode",
                    Text = "Not Found Players",
                    Duration = 2,
                    })
            end
        end
    end
end

player.Chatted:Connect(onPlayerChatted)
